(function(t){function e(e){for(var i,n,l=e[0],r=e[1],c=e[2],u=0,h=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&h.push(a[n][0]),a[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,l=1;l<s.length;l++){var r=s[l];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},a={app:0},o=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/trafficlaws-client/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"3a3a":function(t,e,s){"use strict";s("9641")},"3e7d":function(t,e,s){"use strict";s("b182")},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),a=s("2f62"),o=s("bc3a"),n=s.n(o),l=s("7496"),r=s("40dc"),c=s("5bc1"),d=s("132d"),u=s("8860"),h=s("da13"),p=s("1baa"),f=s("34c3"),m=s("5d23"),g=s("f6c4"),v=s("f774"),y=s("6b53"),w=s("0fd9"),b=s("2fa4"),C=s("8654"),x=function(){var t=this,e=t._self._c;return e(l["a"],[t.loginAppBar?e(r["a"],{attrs:{app:"",color:"primary",flat:""}}):e(r["a"],{attrs:{app:"",color:"primary",flat:""}},[e(c["a"],{on:{click:function(e){e.stopPropagation(),t.drawer1=!t.drawer1}}}),e(b["a"]),t.showSearchField?e(y["a"],{attrs:{"max-width":"260"}},[e(C["a"],{attrs:{"hide-details":"",rounded:"",clearable:"",label:"Search","append-outer-icon":"mdi-magnify",color:"black","background-color":"white"},on:{"click:append-outer":function(e){return t.setSearchField({key:"Enter"})},keydown:t.setSearchField},model:{value:t.searchField,callback:function(e){t.searchField=e},expression:"searchField"}})],1):t._e(),e(b["a"]),e(w["a"],{attrs:{justify:"center"}},[e("AuthButtons")],1)],1),e(v["a"],{attrs:{absolute:"",bottom:"",temporary:""},model:{value:t.drawer1,callback:function(e){t.drawer1=e},expression:"drawer1"}},[e(u["a"],{attrs:{nav:"",dense:""}},[e(p["a"],{attrs:{"active-class":"deep-purple--text text--accent-4"}},t._l(t.links,(function(s){return e(h["a"],{key:s.label,attrs:{link:"",to:s.to}},[e(f["a"],[e(d["a"],[t._v(t._s(s.icon))])],1),e(m["b"],[t._v(t._s(s.label))])],1)})),1)],1)],1),e(g["a"],[e("div",{attrs:{id:"app"}},[e("router-view"),e("AppConfiguration",{attrs:{dialog:t.dialog,save:t.save}})],1)])],1)},_=[];n.a.interceptors.request.use(async t=>{let e;const s=window.App.$store.state.trafficlawstore.tokens;return s&&(e=s.tokens.access_token,t.url.includes("trafficlaws")?(t.headers.tokens=JSON.stringify(s),t.headers.accept="application/json"):e&&(delete t.headers.tokens,delete t.headers.accept,t.headers.Authorization="Bearer "+e)),t});var I={create:(t,e)=>n.a.post(t,e),getData:t=>n.a.get(t),getDataByBody:(t,e)=>n.a.get(t,{params:e}),getStream:function(t,e,s){const{yUrl:i,start:a,end:o,videoId:l,format:r}=e;return n.a.get(t,{signal:s.signal,params:{start:a,end:o,yUrl:i,format:r,videoId:l},responseType:"blob",transformResponse:[function(t){return t}]})},exportFile:t=>{let e,s;t&&(e=window.URL.createObjectURL(new Blob([t])),s=document.createElement("a"),s.href=e,s.setAttribute("download","file.mp4"),document.body.appendChild(s),s.click(),s.remove())},downloadfile:t=>n.a.get(t,{responseType:"blob",transformResponse:[function(t,e){return console.log("getData : ",t,", ",e),t}]}),update:(t,e)=>n.a.put(t,e),delete:t=>n.a.delete(t)},k={data:()=>({}),methods:{getAuthCode:E,getData:function(t,e){I.getData(t).then(t=>{t&&e&&e(t.data)}).catch(t=>{401===t.response.status?this.getAuthCode():e&&e(t)}).finally(()=>this.loading=!1)},getDataByBody:function(t,e,s){I.getDataByBody(t,e).then(t=>{t&&s&&s(t.data)}).catch(t=>{401===t.response.status?this.getAuthCode():s&&s(t)}).finally(()=>this.loading=!1)},getStream:function(t,e,s,i){I.getStream(t,e,s).then(t=>{t&&i&&i(t.data)}).catch(t=>{"canceled"===t.message&&i?i(null,t.message):401===t.response.status?this.getAuthCode():i&&i(t)}).finally(()=>this.loading=!1)},getFile:function(t,e){I.downloadfile(t).then(t=>{t&&e&&e(t)}).catch(t=>{401===t.response.status?this.getAuthCode():e&&e(t)}).finally(()=>this.loading=!1)},putData:function(t,e,s){I.update(t,e).then(t=>{s&&s(t.data)}).catch(t=>{401===t.response.status?this.getAuthCode():s&&s(t)}).finally(()=>this.loading=!1)},postData:function(t,e,s){I.create(t,e).then(t=>{s&&s(t.data)}).catch(t=>{401===t.response.status?this.getAuthCode():s&&s(t)}).finally(()=>this.loading=!1)},deleteData:function(t,e){I.delete(t).then(t=>{e&&e(t.data)}).catch(t=>{401===t.response.status?this.getAuthCode():e&&e(t)}).finally(()=>this.loading=!1)},getYoutbeVideos:function(t,e){this.getData(t,e)}}};let F,D,S;const V="https://www.googleapis.com/oauth2/v3/userinfo";function P(t,e,s,i){const a=void 0!==t?t:0,o=s?a:a+1,n="AIzaSyA4oti9VxSGxLfcF7uNk4flp2WpGirVU8s".split(", ");let l=n[o];e&&console.error("Execute error",e),l&&window.gapi.client?(window.gapi.client.setApiKey(l),i&&i(o)):i&&i(-1)}function R(t){P(0,null,!0,()=>{window.gapi.load("client",()=>window.gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest").then((function(){t&&t("GAPI client loaded for API")}),(function(t){console.error("Error loading GAPI client for API",t)})))})}function A(t,e,s,i,a,o,n){window.gapi.client.youtube.search.list({channelId:e,part:t,q:s,type:i,pageToken:a}).then((function(t){o&&t.result&&o(t.result)}),(function(l){403===l.status&&P(n,l,!1,n=>{-1!==n&&A(t,e,s,i,a,o,n)})}))}function T(t,e,s){let i;const{part:a,channelId:o,q:n,type:l,pageToken:r,maxResult:c,order:d,publishedAfter:u}=t;i={channelId:o,part:a,q:n||"",type:l,maxResults:c||10,order:d||"date",pageToken:r||null},u&&(i.publishedAfter=u),window.gapi.client.youtube.search.list(i).then((function(t){e&&t.result&&e(t.result)}),(function(i){403===i.status&&P(s,i,!1,s=>{-1!==s&&T(t,e,s)})}))}function $(t){let e=parseInt(t,10),s=Math.floor(e/3600),i=Math.floor(e/60)%60,a=e%60;return[s,i,a].map(t=>t<10?"0"+t:t).filter((t,e)=>"00"!==t||e>0).join(":")}function L(t){let e,s=t,i=new DOMParser;return t&&(e=i.parseFromString(t,"text/html"),s=e.documentElement.textContent),s}function O(t){let e,s,i=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,a=0,o=0,n=0;if(i.test(t)){let l=i.exec(t);l[1]&&(a=Number(l[1])),l[2]&&(o=Number(l[2])),l[3]&&(n=Number(l[3])),s=3600*a+60*o+n,e=$(s-1)}else e=$(0);return e}function j(t,e,s,i){window.gapi.client.youtube.videos.list({id:t,part:e}).then((function(t){s&&t.result&&s(t.result)}),(function(a){403===a.status&&P(i,a,!1,i=>{-1!==i&&j(t,e,s,i)})}))}function N(){S=window.google.accounts.oauth2.initTokenClient({client_id:"375759355990-888bhv0jakmh5a63s3fsp2go2hg59dqi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:t=>{t.access_token&&(F=t.access_token)}})}function M(t){const e={code:t};k.methods.postData("https://trafficlaws-server.vercel.app/trafficlaws/code",e,t=>{t&&(F=t.tokens.access_token,window.localStorage.setItem("tokens",JSON.stringify(t)),window.App.$store.commit("updateTokens",t),k.methods.getData(V,t=>{window.localStorage.setItem("user",JSON.stringify(t)),window.location.replace(window.location.origin+window.location.pathname)}))})}function B(){D=window.google.accounts.oauth2.initCodeClient({client_id:"375759355990-888bhv0jakmh5a63s3fsp2go2hg59dqi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:t=>{t.code&&M(t.code)}})}function E(){D.requestCode()}function z(){window.localStorage.setItem("user",null),window.localStorage.setItem("credential",null),window.App.$store.commit("updateCredential",null),window.localStorage.setItem("tokens",null),window.App.$store.commit("updateTokens",null),window.location.replace(window.location.origin+window.location.pathname)}function U(){const t=window.App.$store.state.trafficlawstore.credential,e=JSON.parse(window.localStorage.getItem("tokens"));t?window.google.accounts.id.revoke(t.sub,t=>{t&&z()}):e&&window.google.accounts.oauth2.revoke(e.tokens.access_token,t=>{t&&z()})}function Q(t){t&&(window.localStorage.setItem("credential",t.credential),window.App.$store.commit("updateCredential",t.credential),window.location.replace(window.location.origin+window.location.pathname))}function q(){window.google.accounts.id.initialize({client_id:"375759355990-888bhv0jakmh5a63s3fsp2go2hg59dqi.apps.googleusercontent.com",callback:Q})}window.onload=function(){B(),N(),q()};let G=s("19de");var Y={data:()=>({stopAll:!1,waitingList:[],stopDownload:!1,abortController:null,settingsFile:"settings.json"}),mixins:[k],methods:{getFile:function(t,e){t&&this.getData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/file/content/"+t,t=>{e&&e(t)})},getFiles:function(t){this.getData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/files",e=>{t&&t(e)})},postFile:function(t,e,s,i){e&&s&&this.postData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/",{folderName:t,fileName:e,data:s},t=>{i&&i(t)})},deleteFile:function(t,e){t&&this.deleteData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/file/"+t.fileId,()=>{e&&e()})},downloadFile:function(t,e,s){const{title:i,format:a}=t;t&&this.getStream("https://trafficlaws-server.vercel.app/trafficlaws/google/youtube/download",t,e,t=>{console.log("downloadFile callBack : ",this.stopAll),t&&!this.stopAll&&G(t,i+"."+a),s&&s()})},deleteFileByName:function(t,e){t&&this.deleteData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/folder/"+t,()=>{e&&e()})},deleteFiles:function(t,e){e&&e[t]?this.deleteFile(e[t],()=>{this.files=this.files.filter(s=>s.fileId!==e[t].fileId),this.deleteFiles(t+1,e)}):t<e.length&&this.deleteFiles(t+1,e)}}},H=s("8336"),J=s("b0af"),X=s("ce7e"),K=s("e449"),W=s("71d9"),Z=function(){var t=this,e=t._self._c;return e("div",[t.getUser?e(W["a"],{attrs:{dense:"",floating:"",color:"primary"}},[e("span",{staticClass:"white--text",on:{"v-on:click":t.signOut}},[t._v("Logout")]),e(X["a"],{staticClass:"mx-2",attrs:{vertical:""}}),e(K["a"],{attrs:{"min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(H["a"],t._g({staticClass:"white--text",attrs:{icon:""}},s),[e(d["a"],[t._v("mdi-account")])],1)]}}],null,!1,1372794140)},[e(J["a"],[e(p["a"],[e(h["a"],[e(f["a"],[e(d["a"],{domProps:{textContent:t._s("mdi-account-details")}})],1),e(m["a"],[e(m["b"],{domProps:{textContent:t._s(t.getUser.name)}})],1)],1),e(X["a"]),e(h["a"],[e(f["a"],[e(d["a"],{domProps:{textContent:t._s("mdi-logout")}})],1),e(m["a"],[e(m["b"],{domProps:{textContent:t._s("Logout")},on:{click:t.signOut}})],1)],1)],1)],1)],1)],1):e(W["a"],{attrs:{dense:"",floating:"",color:"primary"}},[e("span",{staticClass:"white--text",on:{"v-on:click":t.signOut}},[t._v("Login")]),e(X["a"],{staticClass:"mx-2",attrs:{vertical:""}}),e(H["a"],{staticClass:"white--text",attrs:{icon:""},on:{"v-on:click":t.signOut}},[e(d["a"],[t._v(" mdi-login-variant")])],1)],1)],1)},tt=[],et={name:"AuthButtons",data:()=>({}),mixins:[k],computed:{getUser(){let t=JSON.parse(window.localStorage.getItem("user"));return t&&t.name?t:null}},methods:{signOut:U}},st=et,it=s("2877"),at=Object(it["a"])(st,Z,tt,!1,null,null,null),ot=at.exports,nt=s("99d9"),lt=s("62ad"),rt=s("4bd4"),ct=s("8e36"),dt=function(){var t=this,e=t._self._c;return e("FloatDialog",{attrs:{showDialog:t.dialog,hideOverlay:!1,showCloseButton:!1,title:"App configuration"},scopedSlots:t._u([{key:"form",fn:function(){return[t.showProgress?e(ct["a"],{attrs:{height:"28"},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}},[e("strong",[t._v(t._s(t.progress)+"%")])]):t._e(),e(nt["b"],[e(rt["a"],{ref:"form",attrs:{"lazy-validation":""}},[e(w["a"],[e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"App folder : "},model:{value:t.configuration.appFolder,callback:function(e){t.$set(t.configuration,"appFolder",e)},expression:"configuration.appFolder"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"Configuration file : "},model:{value:t.configuration.configFile,callback:function(e){t.$set(t.configuration,"configFile",e)},expression:"configuration.configFile"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"Favorites file : "},model:{value:t.configuration.favoritesFile,callback:function(e){t.$set(t.configuration,"favoritesFile",e)},expression:"configuration.favoritesFile"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"PlayList file : "},model:{value:t.configuration.playListFile,callback:function(e){t.$set(t.configuration,"playListFile",e)},expression:"configuration.playListFile"}})],1)],1)],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[e(H["a"],{attrs:{text:"",color:"primary"},on:{click:function(e){return t.save(t.configuration)}}},[t._v(" Save ")])]},proxy:!0}])})},ut=[],ht=s("169a"),pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(ht["a"],{attrs:{width:t.width,persistent:t.persistent,"hide-overlay":t.hideOverlay},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(J["a"],[e(nt["c"],{staticClass:"text-h5 grey lighten-2"},[t._v(" "+t._s(t.title)+" ")]),t._t("content",null,{dialog:t.dialog}),t._t("list",null,{dialog:t.dialog}),t._t("table",null,{dialog:t.dialog}),t._t("form",null,{dialog:t.dialog}),e(X["a"]),e(nt["a"],[e(b["a"]),t._t("buttons"),t.showCloseButton?e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.setShowDialog}},[t._v(" Close ")]):t._e()],2)],2)],1)],1)},ft=[],mt={name:"FloatDialog",props:{title:{type:String,default:()=>""},width:{type:Number,default:()=>500},showDialog:{type:Boolean,default:()=>!1},setShowDialog:{type:Function,default:()=>{}},showCloseButton:{type:Boolean,default:()=>!0},persistent:{type:Boolean,default:()=>!0},hideOverlay:{type:Boolean,default:()=>!0}},watch:{showDialog:function(){this.dialog=this.showDialog}},data(){return{dialog:!1}},mounted(){this.movableDialogHandler()},methods:{bindDialogMousedownEvent:function(t){document.addEventListener("mousedown",e=>{const s=e.target.closest(".v-dialog.v-dialog--active");0===e.button&&null!=s&&e.target.classList.contains("v-card__title")&&(t.el=s,t.mouseStartX=e.clientX,t.mouseStartY=e.clientY,t.elStartX=t.el.getBoundingClientRect().left,t.elStartY=t.el.getBoundingClientRect().top,t.el.style.position="fixed",t.el.style.margin=0,t.oldTransition=t.el.style.transition,t.el.style.transition="none")})},bindDialogMousemoveEvent:function(t){document.addEventListener("mousemove",e=>{void 0!==t.el&&(t.el.style.left=Math.min(Math.max(t.elStartX+e.clientX-t.mouseStartX,0),window.innerWidth-t.el.getBoundingClientRect().width)+"px",t.el.style.top=Math.min(Math.max(t.elStartY+e.clientY-t.mouseStartY,0),window.innerHeight-t.el.getBoundingClientRect().height)+"px")})},movableDialogHandler:function(){const t={};this.bindDialogMousedownEvent(t),this.bindDialogMousemoveEvent(t),document.addEventListener("mouseup",()=>{void 0!==t.el&&(t.el.style.transition=t.oldTransition,t.el=void 0)}),setInterval(()=>{const t=document.querySelector(".v-dialog.v-dialog--active");null!==t&&(t.style.left=Math.min(parseInt(t.style.left),window.innerWidth-t.getBoundingClientRect().width)+"px",t.style.top=Math.min(parseInt(t.style.top),window.innerHeight-t.getBoundingClientRect().height)+"px")},100)}}},gt=mt,vt=Object(it["a"])(gt,pt,ft,!1,null,null,null),yt=vt.exports,wt={name:"AppConfiguration",components:{FloatDialog:yt},props:{dialog:{type:Boolean,default:()=>!1},save:{type:Function,default:()=>{}}},data(){return{progress:"",showProgress:!1,configuration:{appFolder:"AppFolder",configFile:"settings.json",playListFile:"playList.json",favoritesFile:"favorites.json",categories:["News","Autos & Vehicles","Comedy","Education","Entertainment","Film & Animation","Gaming","Sports","Travel & Events","Music","People and Blogs"]}}}},bt=wt,Ct=Object(it["a"])(bt,dt,ut,!1,null,null,null),xt=Ct.exports,_t={name:"App",components:{AuthButtons:ot,AppConfiguration:xt},data:()=>({totalTabs:0,dialog:!1,searchField:"",currentRoute:"",currentUser:null,showSearchField:!1,links:[{label:"Formations",to:"/formations",icon:"mdi-school"},{label:"TrafficLaws",to:"/autocodes",icon:"mdi-traffic-cone"},{label:"Projects",to:"/projects",icon:"mdi-folder"},{label:"Models",to:"/models",icon:"mdi-vector-square-edit"},{label:"Algorithms",to:"/algorithms",icon:"mdi-file-code"}],drawer:!1,drawer1:!1,mini:!0,route:window.location.hash,configurations:null}),watch:{$route:function(t){const e=new URL(window.location.href);t&&(this.currentRoute=t.path.replace("/","")),this.searchField="",this.showSearchField="#/"===e.hash}},computed:{loginAppBar:function(){return window.location.href.includes("/login")}},mixins:[Y],created(){this.fetchCredential()},mounted(){const t=new URL(window.location.href);"#/login"!==t.hash&&this.initConfig()},methods:{getAuthCode:E,clearSession:z,...Object(a["b"])(["fetchCredential"]),initConfig:function(){this.getFile(this.settingsFile,t=>{const{configFile:e,favoritesFile:s,appFolder:i}=t;e&&s&&i?(this.configurations=t,this.$store.commit("updateConfig",t)):this.dialog=!0})},save:function(t){this.postFile(t.appFolder,t.configFile,t,()=>{this.dialog=!1,this.$store.commit("updateConfig",t)})},login:function(){this.getAuthCode()},setSearchField:function(t){t&&"Enter"===t.key&&this.$store.commit("updateSearchField",this.searchField)},closeTabHandler:function(){window.addEventListener("beforeunload",()=>{this.clearSession()})}}},It=_t,kt=Object(it["a"])(It,x,_,!1,null,null,null),Ft=kt.exports,Dt=s("8c4f"),St=s("8212"),Vt=s("a523"),Pt=function(){var t=this,e=t._self._c;return e(Vt["a"],[e(w["a"],[e(lt["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e("router-link",{staticStyle:{"text-decoration":"none",color:"inherit"},attrs:{to:"/"}},[e(St["a"],{attrs:{color:"red",size:"82"}},[e("span",{staticClass:"white--text text-h5"},[t._v("28")])])],1)],1),e(lt["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e(nt["c"],[t._v("Connectez-vous à Zcore")])],1),e(lt["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e(H["a"],{attrs:{icon:"",color:"green","data-cy":"login-input"},on:{click:t.getAuthCode}},[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-login ")])],1)],1)],1)],1)},Rt=[],At={name:"Auth",methods:{getAuthCode:E}},Tt=At,$t=Object(it["a"])(Tt,Pt,Rt,!1,null,null,null),Lt=$t.exports,Ot=s("a844"),jt=function(){var t=this,e=t._self._c;return e("div",[e(w["a"],[e(lt["a"],{attrs:{cols:"2"}},[e(J["a"],{staticClass:"overflow-auto",attrs:{height:"600"}},[e(u["a"],{attrs:{nav:"",dense:""}},[e(H["a"],{staticClass:"mb-2",attrs:{outlined:"",color:"indigo",block:""},on:{click:t.newChat}},[t._v(" New chat ")]),e(p["a"],{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.chats,(function(s,i){return e(h["a"],{key:s.title+i},[e(f["a"],[e(d["a"],{domProps:{textContent:t._s("mdi-message")}})],1),e(m["a"],[e(m["b"],{domProps:{textContent:t._s(s.title)}})],1)],1)})),1)],1)],1)],1),e(lt["a"],{attrs:{cols:"10"}},[e(J["a"],{staticClass:"overflow-auto",attrs:{height:"600"}},[e(nt["b"],[e("form",t._l(t.getConversations,(function(s,i){return e(w["a"],{key:i},[e(lt["a"],{staticClass:"d-flex justify-end",attrs:{cols:"1"}},[e(St["a"],[e("img",{attrs:{src:s.src}})])],1),e(lt["a"],{attrs:{cols:"11"}},[e(Ot["a"],{attrs:{label:s.name,outlined:"",rows:s.rows},model:{value:s.comment,callback:function(e){t.$set(s,"comment",e)},expression:"conversation.comment"}})],1)],1)})),1)])],1)],1)],1),e(Ot["a"],{staticClass:"mt-2",attrs:{label:"Send",outlined:"",rows:t.getRow,"clear-icon":"mdi-close-circle"},on:{"click:append-outer":function(e){return t.setChatInput({key:"Enter"})},keydown:t.setChatInput},model:{value:t.chatInput,callback:function(e){t.chatInput=e},expression:"chatInput"}})],1)},Nt=[],Mt=(s("14d9"),{name:"OpenAI",data(){return{chatInput:"",right:null,selectedItem:0,chats:[{title:"Default1",conversations:[]}]}},mixins:[k],computed:{getRow:function(){let t=1,e=5;return this.chatInput&&(t=this.chatInput.split("\n").length,t=t<e?t:e),t},getConversations:function(){let t=[];return this.chats&&(t=this.chats[this.selectedItem].conversations),t}},methods:{setChatInput:function(t){t&&"Enter"===t.key&&(this.chats&&this.chats[this.selectedItem].conversations.push({name:"User",comment:this.chatInput,rows:this.chatInput.split("\n").length,src:"https://cdn.vuetifyjs.com/images/john.jpg"}),this.getAiResponse(this.chatInput,t=>{t&&this.chats[this.selectedItem].conversations.push({name:"Bot",comment:t.data,rows:t.data.trim().split("\n").length,src:"https://cdn.vuetifyjs.com/images/lists/2.jpg"}),this.chatInput=""}))},newChat:function(){this.chats&&this.chats.push({title:"Default"+(this.chats.length+1),conversations:[]})},getAiResponse:function(t,e){const s={prompt:t};t&&s&&this.getDataByBody("https://trafficlaws-server.vercel.app/trafficlaws/openai/chatgpt/test",s,t=>{e&&e(t)})}}}),Bt=Mt,Et=Object(it["a"])(Bt,jt,Nt,!1,null,null,null),zt=Et.exports,Ut=function(){var t=this,e=t._self._c;return e("NavBar",{attrs:{channelId:t.channelId,view:t.view,setView:t.setView},scopedSlots:t._u([{key:"players",fn:function({playList:s,channels:i}){return[e("Players",{attrs:{setView:t.setView,playList:s,channels:i,view:t.view}})]}},{key:"footer",fn:function(){return[e("Footer",{attrs:{setView:t.setView}})]},proxy:!0}])})},Qt=[],qt=s("4ca6"),Gt=s("553a"),Yt=function(){var t=this,e=t._self._c;return e(J["a"],{attrs:{height:"100px"}},[e(Gt["a"],[e(J["a"],{staticClass:"red lighten-1 text-center",attrs:{flat:"",tile:"",width:"100%"}},[e(nt["b"],{staticClass:"pa-4"},[e(H["a"],{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){return t.setView("videosView")}}},[e(d["a"],{attrs:{size:"24px"}},[t._v(" mdi-youtube ")]),t._v(" Videos ")],1),e(H["a"],{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){return t.setView("channelsView")}}},[e(d["a"],{attrs:{size:"24px"}},[t._v(" mdi-view-grid ")]),t._v(" Channels ")],1),e(H["a"],{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){return t.setView("cutsView")}}},[e(qt["a"],{attrs:{content:t.cuts,value:t.cuts,color:"green",overlap:""}},[e(d["a"],{attrs:{size:"24px"}},[t._v(" mdi-filmstrip-box-multiple")])],1),t._v(" Cuts ")],1),e(H["a"],{staticClass:"mr-2",attrs:{text:""},on:{click:t.setShowDialog}},[e(d["a"],{attrs:{size:"24px"}},[t._v(" mdi-forum ")]),t._v(" ChatGPT ")],1)],1),e("ChatGPT",{attrs:{dialog:t.dialog,setShowDialog:t.setShowDialog}})],1)],1)],1)},Ht=[],Jt=function(){var t=this,e=t._self._c;return e("FloatDialog",{attrs:{width:1e3,showDialog:t.dialog,setShowDialog:t.setShowDialog,title:"ChatGPT"},scopedSlots:t._u([{key:"content",fn:function(){return[e(nt["b"],[e("OpenAI")],1)]},proxy:!0}])})},Xt=[],Kt={name:"ChatGPT",components:{OpenAI:zt,FloatDialog:yt},props:{dialog:{type:Boolean,default:()=>!1},setShowDialog:{type:Function,default:()=>{}}},data(){return{progress:"",showProgress:!1}}},Wt=Kt,Zt=Object(it["a"])(Wt,Jt,Xt,!1,null,null,null),te=Zt.exports,ee={name:"Footer",components:{ChatGPT:te},props:{setView:{type:Function,default:()=>{}}},watch:{"$store.state.studio.cutsCpt":{handler:function(){const{cutsCpt:t}=this.$store.state.studio;t&&(this.cuts=t.value)},immediate:!0}},data(){return{cuts:28,dialog:!1}},methods:{resetCounter:function(){this.cuts=0,this.setView("cutsView")},setShowDialog:function(){this.dialog=!this.dialog}}},se=ee,ie=Object(it["a"])(se,Yt,Ht,!1,null,null,null),ae=ie.exports,oe=s("b974"),ne=s("2a7f"),le=function(){var t=this,e=t._self._c;return e(J["a"],{attrs:{flat:""}},[e(W["a"],{attrs:{flat:""}},[e(c["a"])],1),e(J["a"],{staticClass:"mx-auto",staticStyle:{"margin-top":"-64px"}},[e(W["a"],{attrs:{flat:""}},[e(ne["a"],{staticClass:"grey--text"},[t._v(" Studio ")]),e(b["a"]),e(H["a"],{attrs:{icon:""}},[e(d["a"],[t._v("mdi-dots-vertical")])],1)],1),e(X["a"]),e(w["a"],[e(lt["a"],{attrs:{cols:"6"}},[e(J["a"],[e(W["a"],{attrs:{flat:""}},[e(ne["a"],{staticClass:"grey--text"},[t._v(" Bar1 ")]),e(b["a"]),"videosView"===t.currentView||"channelsView"===t.currentView?e(K["a"],{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[e(d["a"],[t._v("mdi-magnify")])],1)]}}],null,!1,1229277174)},[e(J["a"],{staticClass:"pa-2"},[e(w["a"],[e(lt["a"],{staticClass:"mr-0",attrs:{cols:"4"}},[e(oe["a"],{attrs:{items:t.filters,label:"Filters",outlined:""},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),e(lt["a"],{staticClass:"ml-0",attrs:{cols:"8"}},[e(C["a"],{attrs:{label:"Search",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":function(e){return t.setSearchField({key:"Enter"})},keydown:t.setSearchField},model:{value:t.searchField,callback:function(e){t.searchField=e},expression:"searchField"}})],1)],1)],1)],1):t._e(),"videosView"===t.currentView||"channelsView"===t.currentView?e(K["a"],{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),s),[e(d["a"],[t._v("mdi-search-web")])],1)]}}],null,!1,273948598)},[e(J["a"],{staticClass:"pa-2"},[e(C["a"],{attrs:{"hide-details":"",rounded:"",clearable:"",label:"Search by URL","append-outer-icon":"mdi-magnify",color:"black","background-color":"white"},on:{"click:append-outer":function(e){return t.setUrlField({key:"Enter"})},keydown:t.setUrlField},model:{value:t.urlField,callback:function(e){t.urlField=e},expression:"urlField"}})],1)],1):t._e(),e(H["a"],{attrs:{icon:""},on:{click:function(e){return t.setView("channelsView")}}},[e(d["a"],[t._v("mdi-star")])],1),"cutsView"===t.currentView?e(H["a"],{attrs:{icon:""},on:{click:t.clearCuts}},[e(d["a"],[t._v("mdi-backspace")])],1):t._e(),"cutsView"===t.currentView?e(H["a"],{attrs:{icon:""},on:{click:t.selectCuts}},[e(d["a"],[t._v("mdi-select-all")])],1):t._e(),"videosView"===t.currentView||"channelsView"===t.currentView?e(H["a"],{attrs:{icon:""},on:{click:function(e){"videosView"===t.currentView?t.getMoreVideos(t.currentChannelId,t.searchField,t.nextPageToken,t.setCurrentVideos):t.getMoreChannels(t.currentChannelId,t.searchField,t.channelNextPageToken,t.setCurrentChannels)}}},[e(d["a"],[t._v("mdi-dots-vertical")])],1):t._e(),"cutsView"===t.currentView?e(H["a"],{attrs:{icon:""},on:{click:t.setDownloadDialog}},[e(d["a"],[t._v("mdi-download")])],1):t._e(),e(H["a"],{attrs:{icon:""},on:{click:t.setSettingDialog}},[e(d["a"],[t._v("mdi-cog")])],1)],1)],1)],1),e(lt["a"],{attrs:{cols:"6"}},[e(J["a"],[e(W["a"],{attrs:{flat:""}},[e(ne["a"],{staticClass:"grey--text"},[t._v(" Bar2 ")]),e(b["a"]),e(H["a"],{attrs:{icon:""},on:{click:t.setShowDialog}},[e(d["a"],[t._v("mdi-scissors-cutting")])],1)],1)],1)],1)],1),e(w["a"],[e(lt["a"],{attrs:{cols:"12"}},[t._t("players",null,{playList:t.videos,channels:t.channels})],2)],1)],1),t._t("footer"),e("CutDialog",{attrs:{videoId:t.videoId,dialog:t.showDialog,setShowDialog:t.setShowDialog}}),e("SettingForm",{attrs:{channels:t.channels,dialog:t.settingDialog,setSettingDialog:t.setSettingDialog}})],2)},re=[],ce={data:()=>({filter:"date",filters:["date","viewCount"]}),methods:{execute:A,loadClient:R,parseYTitle:L,getVideosData:j,executeByFilter:T,apiDurationToDate:O,yRequest:function(t,e,s,i,a){this.execute(["snippet"],t,e,i,s,t=>{t&&a(t)})},setChannels:function(t,e,s){let i;t&&(i=t.map(t=>({id:t.snippet.channelId,title:t.snippet.channelTitle,description:t.snippet.description,src:t.snippet.thumbnails.default.url})),e&&s?s([...this.channels,...i]):s&&s(i))},getMoreChannels:function(t,e,s,i){R(a=>{a&&s&&this.yRequest(t,e,s,["channel"],t=>{t.items&&this.setChannels(t.items,!0,e=>{i&&i(e,t.nextPageToken)})})})},searchChannels:function(t,e,s,i){R(a=>{a&&e&&""!==e&&this.execute(["snippet"],t,e,["channel"],s,t=>{t.items&&this.setChannels(t.items,!1,e=>{i&&i(e,t.nextPageToken)})})})},setPlayList:function(t,e,s,i){let a=[];t&&0<t.length?(a=t.map(t=>({id:"Videos"===e?t.id.videoId:t.snippet.channelId,title:this.parseYTitle(t.snippet.title),date:t.snippet.publishedAt,description:t.snippet.description,src:t.snippet.thumbnails.medium.url,channelId:t.snippet.channelId,channelTitle:t.snippet.channelTitle,publishedAt:t.snippet.publishedAt,duration:this.apiDurationToDate(t.contentDetails.duration)})),i(s&&i?[...this.videos,...a]:a)):i&&i(this.videos)},addVideosDetails:function(t,e){let s,i,a;t&&t.items&&0<t.items.length?(s=t.items.map(t=>t.id.videoId),this.getVideosData(s,["contentDetails"],s=>{i=t.items.map(t=>(a=s.items.find(e=>e.id===t.id.videoId),t.contentDetails=a?a.contentDetails:{},t)),e&&e(i,t.nextPageToken)})):e&&t.items&&e(t.items,t.nextPageToken)},getMoreVideos:function(t,e,s,i){R(a=>{a&&s&&this.yRequest(t,e,s,["video"],t=>{this.addVideosDetails(t,e=>{e&&this.setPlayList(e,"Videos",!0,e=>{i&&i(e,t.nextPageToken)})})})})},searchVideos:function(t,e){let s,i=new Date;i.setDate(i.getDate()-10),R(i=>{i&&(this.nextPageToken=null,s={part:["snippet"],channelId:this.currentChannelId,q:t,type:["video, playlist"],pageToken:null,maxResult:5,order:this.filter},this.executeByFilter(s,t=>{this.addVideosDetails(t,(t,s)=>{t&&this.setPlayList(t,"Videos",!1,t=>{e&&e(t,s)})})}))})},showChannelVideos:function(t,e,s){R(i=>{i&&this.executeByFilter({part:["snippet"],channelId:t,type:["video, playlist"],maxResult:5,order:e||this.filter},t=>{this.addVideosDetails(t,(t,e)=>{t&&this.setPlayList(t,"Videos",!1,t=>{s&&s(t,e)})})})})}}},de=function(){var t=this,e=t._self._c;return e("FloatDialog",{attrs:{title:t.settingView,showDialog:t.dialog,setShowDialog:t.setSettingDialog},scopedSlots:t._u(["Setting"===t.settingView?{key:"list",fn:function(){return[e(p["a"],{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.items,(function(s,i){return e(h["a"],{key:i},[e(m["a"],[e(m["b"],[t._v(t._s(s.text))])],1),e(f["a"],[e(d["a"],{domProps:{textContent:t._s(s.icon)}})],1)],1)})),1)]},proxy:!0}:null,"General"===t.settingView?{key:"form",fn:function(){return[e(d["a"],{staticClass:"ml-2",on:{click:t.resetView}},[t._v("mdi-arrow-left")]),e("AppConfigDialog",{attrs:{files:t.files,getFile:t.getFile,getFiles:t.getFiles,postFile:t.postFile,initForm:t.initForm,setConfig:t.setConfig,deleteFiles:t.deleteFiles,defaultConfig:t.defaultConfig,categories:t.categories,setCategories:t.setCategories}})]},proxy:!0}:null,"Channels"===t.settingView?{key:"table",fn:function(){return[e(d["a"],{staticClass:"ml-2",on:{click:t.resetView}},[t._v("mdi-arrow-left")]),e("ChannelSettingDialog",{attrs:{dialog:t.dialog,config:t.config,setSettingDialog:t.setSettingDialog,favoritesChannels:t.favoritesChannels,setFavoritesChannel:t.setFavoritesChannel}})]},proxy:!0}:null,{key:"buttons",fn:function(){return["General"===t.settingView?e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.save}},[t._v(" Save ")]):t._e(),"Channels"===t.settingView?e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.submitFavorites}},[t._v(" Submit ")]):t._e()]},proxy:!0}],null,!0)})},ue=[],he=function(){var t=this,e=t._self._c;return e("div",[t.showProgress?e(ct["a"],{attrs:{height:"28"},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}},[e("strong",[t._v(t._s(t.progress)+"%")])]):t._e(),e(nt["b"],[e(rt["a"],{ref:"form",attrs:{"lazy-validation":""}},[e(w["a"],[e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"App folder : "},model:{value:t.config.appFolder,callback:function(e){t.$set(t.config,"appFolder",e)},expression:"config.appFolder"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"Configuration file : "},model:{value:t.config.configFile,callback:function(e){t.$set(t.config,"configFile",e)},expression:"config.configFile"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"Favorites file : "},model:{value:t.config.favoritesFile,callback:function(e){t.$set(t.config,"favoritesFile",e)},expression:"config.favoritesFile"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{label:"PlayList file : "},model:{value:t.config.playListFile,callback:function(e){t.$set(t.config,"playListFile",e)},expression:"config.playListFile"}})],1),e(lt["a"],{attrs:{cols:"12"}},[e("CategoriesForm",{attrs:{setCategories:t.setCategories,categories:t.categories}})],1),e(lt["a"],{attrs:{cols:"12"}},[e("FilesForm",{attrs:{files:t.files,deleteFiles:t.deleteFiles}})],1)],1)],1)],1)],1)},pe=[],fe=function(){var t=this,e=t._self._c;return e("div",[e(w["a"],[e(lt["a"],{attrs:{cols:"9"}},[e(oe["a"],{attrs:{items:t.files,label:"Files name : ","item-text":"name","item-value":"name",outlined:"",multiple:"","return-object":""},on:{click:()=>{}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),e(lt["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"mt-3 ml-2"},[e(d["a"],{on:{click:function(e){return t.deleteFiles(0,t.selected)}}},[t._v("mdi-delete")])],1)])],1)],1)},me=[],ge={name:"FilesForm",components:{},props:{files:{type:Array,default:()=>[]},deleteFiles:{type:Function,default:()=>{}}},data(){return{selected:[]}},methods:{}},ve=ge,ye=Object(it["a"])(ve,fe,me,!1,null,null,null),we=ye.exports,be=function(){var t=this,e=t._self._c;return e("div",[e(w["a"],[e(lt["a"],{attrs:{cols:"9"}},[e(oe["a"],{attrs:{"item-disabled":"",items:t.defaultCategories,label:"Categories",outlined:""},on:{click:t.close},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),e(lt["a"],{attrs:{cols:"3"}},[e("div",{staticClass:"mt-3 ml-2"},[e(d["a"],{on:{click:t.deleteItem}},[t._v("mdi-delete")]),e(K["a"],{attrs:{"offset-y":"","close-on-click":!1,"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(d["a"],t._g(t._b({},"v-icon",i,!1),s),[t._v("mdi-plus")])]}}]),model:{value:t.menuDialog,callback:function(e){t.menuDialog=e},expression:"menuDialog"}},[e(J["a"],[e(nt["c"],{staticClass:"text-h5 grey lighten-2"},[t._v(" Category ")]),e(rt["a"],[e(w["a"],[e(lt["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Category",outlined:""},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1)],1)],1),e(X["a"]),e(nt["a"],[e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.add}},[t._v(" Add ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.close}},[t._v(" Close ")])],1)],1)],1)],1)])],1)],1)},Ce=[],xe={name:"CategoriesForm",components:{},props:{categories:{type:Array,default:()=>[]},setCategories:{type:Function,default:()=>{}}},data(){return{selected:null,category:null,menuDialog:!1,defaultCategories:[]}},watch:{categories:{handler:function(){this.categories&&(this.defaultCategories=this.categories)},immediate:!0}},methods:{close:function(){this.menuDialog&&(this.category=null,this.menuDialog=!1)},add:function(){this.defaultCategories&&!this.defaultCategories.some(t=>t===this.category)?(this.defaultCategories.push(this.category),this.setCategories(this.defaultCategories),this.close()):console.log("Item exist")},deleteItem:function(){this.selected&&(this.defaultCategories=this.defaultCategories.filter(t=>t!==this.selected),this.setCategories(this.defaultCategories))}}},_e=xe,Ie=Object(it["a"])(_e,be,Ce,!1,null,null,null),ke=Ie.exports,Fe={name:"AppConfigDialog",components:{FilesForm:we,CategoriesForm:ke},props:{initForm:{type:Function,default:()=>{}},files:{type:Array,default:()=>[]},getFile:{type:Function,default:()=>{}},postFile:{type:Function,default:()=>{}},getFiles:{type:Function,default:()=>{}},setConfig:{type:Function,default:()=>{}},defaultConfig:{type:Object,default:()=>null},categories:{type:Array,default:()=>[]},deleteFiles:{type:Function,default:()=>{}},setCategories:{type:Function,default:()=>{}}},data(){return{progress:0,selected:[],showProgress:!1,config:{appFolder:"AppFolder",configFile:"settings.json",playListFile:"playList.json",favoritesFile:"favorites.json",categories:["News","Autos & Vehicles","Comedy","Education","Entertainment","Film & Animation","Gaming","Sports","Travel & Events","Music","People and Blogs"]}}},watch:{dialog:function(){this.dialog&&(this.progress=0)},defaultConfig:{handler:function(t){t&&(this.config={appFolder:t.appFolder,configFile:t.configFile,favoritesFile:t.favoritesFile,playListFile:t.playListFile,categories:t.categories})},immediate:!0},config:{handler:function(){this.config&&this.setConfig(this.config)},deep:!0,immediate:!0}}},De=Fe,Se=Object(it["a"])(De,he,pe,!1,null,null,null),Ve=Se.exports,Pe=s("8fea"),Re=s("891e"),Ae=function(){var t=this,e=t._self._c;return e("div",[e(Pe["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.getChannels,page:t.page,"items-per-page":t.itemsPerPage,"hide-default-footer":""},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.actions",fn:function({item:s}){return[e(d["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(s)}}},[t._v(" mdi-pencil ")]),e(d["a"],{attrs:{small:""},on:{click:function(e){return t.deleteItem(s)}}},[t._v(" mdi-delete ")])]}}])}),e("div",{staticClass:"text-center pt-2"},[e(Re["a"],{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),e(ht["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(J["a"],[e(nt["b"],[e(Vt["a"],[e(w["a"],[e(lt["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Channel title"},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,"title",e)},expression:"editedItem.title"}})],1),e(lt["a"],{attrs:{cols:"12"}},[e(Ot["a"],{attrs:{outlined:"",disable:"",name:"Description",label:"Description",value:t.editedItem.description}})],1),e(lt["a"],{attrs:{cols:"12"}},[e(oe["a"],{attrs:{items:t.categories,label:"Category : ","item-text":"category","item-value":"category",outlined:"",multiple:"","return-object":""},model:{value:t.editedItem.category,callback:function(e){t.$set(t.editedItem,"category",e)},expression:"editedItem.category"}})],1)],1)],1)],1),e(nt["a"],[e(b["a"]),e(H["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),e(H["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(ht["a"],{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(J["a"],[e(nt["c"],{staticClass:"text-h5"},[t._v("Are you sure you want to delete this item?")]),e(nt["a"],[e(b["a"]),e(H["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(H["a"],{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(b["a"])],1)],1)],1)],1)},Te=[],$e={name:"ChannelSettingDialog",components:{},props:{favoritesChannels:{type:Array,default:()=>{}},setFavoritesChannel:{type:Function,default:()=>{}},config:{type:Object,default:()=>null}},data(){return{selected:[],categories:["Info","Sport","Gospel","Découverte"],progress:0,dialog:!1,page:1,pageCount:0,itemsPerPage:10,dialogDelete:!1,headers:[{text:"title",align:"start",sortable:!1,value:"title"},{text:"Category",value:"category"},{text:"Actions",value:"actions",sortable:!1}],channels:[],editedIndex:-1,editedItem:{id:"1",title:"",description:"",category:""},defaultItem:{id:"2",title:"",description:"",category:""}}},computed:{getChannels:function(){return Object.assign([],this.channels)}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},favoritesChannels:{handler:function(){this.channels=this.favoritesChannels,this.setFavoritesChannel(this.channels)},immediate:!0},config:{handler:function(){this.config&&this.config.categories&&(this.categories=this.config.categories)},deep:!0,immediate:!0}},methods:{editItem(t){this.editedIndex=this.channels.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.channels.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){this.channels.splice(this.editedIndex,1),this.setFavoritesChannel(this.channels),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){this.editedIndex>-1&&(Object.assign(this.channels[this.editedIndex],this.editedItem),this.channels=Object.assign([],this.channels),this.setFavoritesChannel(this.channels)),this.close()}}},Le=$e,Oe=Object(it["a"])(Le,Ae,Te,!1,null,null,null),je=Oe.exports,Ne={name:"SettingForm",components:{FloatDialog:yt,AppConfigDialog:Ve,ChannelSettingDialog:je},props:{dialog:{type:Boolean,default:()=>!1},channels:{type:Array,default:()=>{}},setSettingDialog:{type:Function,default:()=>{}}},data(){return{files:[],selected:[],favoritesChannels:[],dbFavoritesChannels:[],selectedItem:null,settingView:"Setting",configFile:"settings.json",config:{appFolder:"AppFolder",configFile:"settings.json",playListFile:"playList.json",favoritesFile:"favorites.json",categories:["News","Autos & Vehicles","Comedy","Education","Entertainment","Film & Animation","Gaming","Sports","Travel & Events","Music","People and Blogs"]},defaultConfig:null,items:[{text:"General",icon:"mdi-arrow-right"},{text:"Channels",icon:"mdi-arrow-right"}],categories:["News","Autos & Vehicles","Comedy","Education","Entertainment","Film & Animation","Gaming","Sports","Travel & Events","Music","People and Blogs"]}},watch:{dialog:{handler:function(){this.dialog||(this.selectedItem=null,this.settingView="Setting")},immediate:!0},selectedItem:{handler:function(){this.items[this.selectedItem]&&(this.settingView=this.items[this.selectedItem].text)},immediate:!0}},mounted(){this.initForm(),this.initFavorites()},mixins:[k],methods:{resetView:function(){this.selectedItem=null,this.settingView="Setting"},setConfig:function(t){t&&(this.config=t)},setCategories:function(t){t&&(this.config.categories=t)},initForm:function(){this.getFile(this.configFile,t=>{const{configFile:e,favoritesFile:s,appFolder:i,categories:a}=t;e&&s&&i?(this.config.configFile=e,this.config.favoritesFile=s,this.config.appFolder=i,this.categories=a,this.config.categories=a,this.$store.commit("updateConfig",t),this.getFiles(),this.defaultConfig=t):this.$store.commit("updateConfig",t)})},setFavoritesChannel:function(t){t&&(this.dbFavoritesChannels=t)},initFavorites:function(){this.getFile(this.config.favoritesFile,t=>{t&&(this.favoritesChannels=t,this.$store.commit("updateFavoritesChannels",t))})},submitFavorites:function(){this.favoritesChannels&&this.postFile(this.config.appFolder,this.config.favoritesFile,this.dbFavoritesChannels,()=>{this.$store.commit("updateFavoritesChannels",this.dbFavoritesChannels)})},postFile:function(t,e,s,i){e&&s&&this.postData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/",{folderName:t,fileName:e,data:s},t=>{i&&i(t)})},getFile:function(t,e){t&&this.getData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/file/content/"+t,t=>{e&&e(t)})},getFiles:function(){this.getData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/files",t=>{t&&(this.files=t.files)})},deleteFile:function(t,e){t&&this.deleteData("https://trafficlaws-server.vercel.app/trafficlaws/google/drive/file/"+t.fileId,()=>{e&&e()})},deleteFiles:function(t,e){e&&e[t]?this.deleteFile(e[t],()=>{this.files=this.files.filter(s=>s.fileId!==e[t].fileId),this.deleteFiles(t+1,e)}):t<e.length&&this.deleteFiles(t+1,e)},save:function(){const{appFolder:t,configFile:e}=this.config;t&&e&&this.config&&this.postFile(this.config.appFolder,this.config.configFile,this.config,()=>{this.getFiles(),this.$store.commit("updateConfig",this.config),console.log("save file : ",this.appFolder)})}}},Me=Ne,Be=Object(it["a"])(Me,de,ue,!1,null,null,null),Ee=Be.exports,ze=s("ba0d"),Ue=function(){var t=this,e=t._self._c;return e("FloatDialog",{attrs:{title:"Cuts",showDialog:t.dialog,setShowDialog:t.setShowDialog},scopedSlots:t._u([{key:"form",fn:function(){return[e("div",[t.showProgress?e(ct["a"],{attrs:{value:t.progress,height:"28"}},[e("strong",[t._v(t._s(t.progress)+"%")])]):t._e(),e(nt["b"],[e(rt["a"],{ref:"form",attrs:{"lazy-validation":""}},[e(w["a"],[e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{disabled:"",label:"Channel title : "},model:{value:t.channelTitle,callback:function(e){t.channelTitle=e},expression:"channelTitle"}})],1),e(lt["a"],{attrs:{cols:"6"}},[e(C["a"],{attrs:{disabled:"",label:"Published at : "},model:{value:t.publishedAt,callback:function(e){t.publishedAt=e},expression:"publishedAt"}})],1),e(lt["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Title : "},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),e(lt["a"],{staticClass:"pa-2",attrs:{cols:"8"}},[e(ze["a"],{staticClass:"align-center",attrs:{min:0,step:"0.5",max:t.getDuration,label:"Start"},scopedSlots:t._u([{key:"append",fn:function(){return[e(C["a"],{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{type:"number",step:"0.5",min:0},model:{value:t.start,callback:function(e){t.start=t._n(e)},expression:"start"}})]},proxy:!0}]),model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1),e(lt["a"],{staticClass:"pa-4",attrs:{cols:"4"}},[e(H["a"],{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.defineStart}},[t._v(" Define start ")])],1),e(lt["a"],{attrs:{cols:"8"}},[e(ze["a"],{staticClass:"align-center",attrs:{min:0,step:"0.5",max:t.getDuration,label:"End"},scopedSlots:t._u([{key:"append",fn:function(){return[e(C["a"],{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{type:"number",step:"0.5",min:0},model:{value:t.end,callback:function(e){t.end=t._n(e)},expression:"end"}})]},proxy:!0}]),model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),e(lt["a"],{staticClass:"pa-4",attrs:{cols:"4"}},[e(H["a"],{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.defineEnd}},[t._v(" Define end ")])],1),e(oe["a"],{attrs:{label:"Format",items:t.formats},model:{value:t.format,callback:function(e){t.format=e},expression:"format"}})],1)],1)],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[e(H["a"],{attrs:{color:"primary",text:""},on:{click:function(e){return t.play()}}},[t._v(" Play ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.download}},[t._v(" Download ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.stop}},[t._v(" Stop ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.addCut}},[t._v(" Cut ")])]},proxy:!0}])})},Qe=[],qe=(s("3c65"),{name:"CutDialog",components:{FloatDialog:yt},props:{dialog:{type:Boolean,default:()=>!1},setShowDialog:{type:Function,default:()=>{}},videoId:{type:String,default:()=>{}}},watch:{dialog:function(){this.dialog&&(this.progress=0,console.log("watch dialog : ",this.dialog))},"$store.state.trafficlawstore.playerReady":{handler:function(){const{playerReady:t}=this.$store.state.trafficlawstore;console.log("dialog : ",this.dialog,", playerReady.state : ",t.state),t&&t.state&&(this.initDuration(),this.$yApi1&&this.$yApi1.videoTitle&&(this.title=this.$yApi1.videoTitle,this.initForm()))},immediate:!0},"$store.state.studio.currentPlayList":{handler:function(){const{currentPlayList:t}=this.$store.state.studio;t&&(this.videos=t)},immediate:!0},videoId:{handler:function(){this.videoId&&this.play(this.videoId)},immediate:!0}},computed:{getDuration:function(){return this.duration}},data(){return{end:64,cuts:[],start:0,title:"",videos:[],duration:28,format:"mp3",progress:28,publishedAt:"",channelTitle:"",showProgress:!1,formats:["mp3","mp4"]}},mixins:[k,Y],mounted(){this.progress=0},methods:{toHHMMSS:$,parseYTitle:L,strToLocaleDate:function(t){let e=t;return e&&(e=new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})),e},initForm:function(){const t=this.getVideoId();let e=this.videos.find(e=>e.id===t);e&&(this.publishedAt=this.strToLocaleDate(e.publishedAt),this.channelTitle=e.channelTitle)},getVideoId:function(){let t=null;const e=new URL(this.$yApi1.getVideoUrl());return e&&(t=e.searchParams.get("v")),t},existCut:function(t){return this.cuts.some(e=>e.videoId===t.videoId&&e.duration===t.duration&&e.startSeconds===t.startSeconds&&e.endSeconds===t.endSeconds&&e.format===t.format)},addCut:function(){let t;const e=this.getVideoId();e&&(t={videoId:e,title:this.title,channelTitle:this.channelTitle,publishedAt:this.publishedAt,startSeconds:this.start,endSeconds:this.end,format:this.format,yUrl:this.$yApi1.getVideoUrl(),duration:this.toHHMMSS(Number(this.end)-Number(this.start)),src:"https://img.youtube.com/vi/"+e+"/hqdefault.jpg"},this.existCut(t)||(this.cuts.unshift(t),this.$store.commit("updateCuts",this.cuts),this.$store.commit("updateCutsCpt",{value:this.cuts.length})))},initDuration:function(){this.dialog||(this.duration=this.$yApi1.getDuration(),this.start=0,this.end=this.duration)},defineStart:function(){const t=this.getVideoId();t&&(this.start=this.$yApi1.getCurrentTime())},defineEnd:function(){const t=this.getVideoId();t&&(this.end=this.$yApi1.getCurrentTime())},stop:function(){this.abortController&&(this.showProgress=!1,this.abortController.abort())},getProgress:function(t){const e="https://trafficlaws-server.vercel.app/trafficlaws/google/youtube/download/progress";t&&this.getData(e+"?videoId="+t+"&format="+this.format,s=>{s&&(this.progress=Number(s.download),100!==this.progress&&setTimeout(()=>{this.getProgress(e,t)},2e3))})},download:function(){const t=this.getVideoId(),e=this.$yApi1.getVideoUrl();t&&e&&(this.showProgress=!0,this.abortController=new AbortController,this.downloadFile({start:this.start,end:this.end,yUrl:e,format:this.format,videoId:t,title:this.title},this.abortController,()=>{this.showProgress=!1,this.abortController=null}),this.getProgress(t))},play:function(t){const e="string"===typeof t?t:this.getVideoId();e&&this.$yApi1.loadVideoById({videoId:e,startSeconds:this.start,endSeconds:this.end})}}}),Ge=qe,Ye=Object(it["a"])(Ge,Ue,Qe,!1,null,null,null),He=Ye.exports,Je={name:"NavBar",props:{channelId:{type:String,default:()=>null},view:{type:String,default:()=>null},setView:{type:Function,default:()=>{}}},components:{SettingForm:Ee,CutDialog:He},watch:{view:function(){this.view&&(this.currentView=this.view)},channelId:function(){this.channelId&&this.showChannelVideos(this.channelId,this.filter,(t,e)=>{this.videos=t,this.searchField="",this.nextPageToken=e,this.currentChannelId=this.channelId})}},data(){return{channels:[],videoId:null,showDialog:!1,settingDialog:!1,currentChannelId:null,urlField:"",searchField:"",videos:[],currentView:"videosView",nextPageToken:null,channelNextPageToken:null}},mixins:[ce],methods:{execute:A,loadClient:R,getVideosData:j,executeByFilter:T,apiDurationToDate:O,setDownloadDialog:function(){this.$store.commit("updateDownloadDialog",!0)},setShowDialog:function(){this.showDialog=!this.showDialog},setSettingDialog:function(){this.settingDialog=!this.settingDialog},setUrlField:function(t){let e,s,i;t&&"Enter"===t.key&&(e=new URL(this.urlField),s=e.searchParams.get("v"),i=e.searchParams.get("ab_channel"),s&&(this.videoId=s),i&&(this.searchVideos(this.searchField,this.setCurrentVideos),this.searchChannels(this.currentChannelId,this.searchField,this.channelNextPageToken,this.setCurrentChannels)))},setSearchField:function(t){t&&"Enter"===t.key&&(this.currentChannelId=null,this.searchVideos(this.searchField,this.setCurrentVideos),this.searchChannels(this.currentChannelId,this.searchField,this.channelNextPageToken,this.setCurrentChannels))},setChannelId:function(t){t&&this.currentChannelId!==t&&(this.currentChannelId=t)},setCurrentChannels:function(t,e){this.channels=t,this.channelNextPageToken=e},setCurrentVideos:function(t,e){this.videos=t,this.nextPageToken=e},selectCuts:function(){const{selectCuts:t}=this.$store.state.studio;t&&this.$store.commit("updateSelectCuts",{state:!t.state})},clearCuts:function(){const{clearCuts:t}=this.$store.state.studio;t&&this.$store.commit("updateClearCuts",{state:!0})}}},Xe=Je,Ke=Object(it["a"])(Xe,le,re,!1,null,null,null),We=Ke.exports,Ze=function(){var t=this,e=t._self._c;return e(w["a"],["videosView"===t.view?e(lt["a"],{attrs:{cols:"6"}},[e("VideosView",{attrs:{getFile:t.getFile,postFile:t.postFile,playList:t.playList,changeVideo:t.changeVideo}})],1):t._e(),"cutsView"===t.view?e(lt["a"],{attrs:{cols:"6"}},[e("CutsView",{attrs:{cutsSelections:t.cuts,playCut:t.playCut}})],1):t._e(),"channelsView"===t.view?e(lt["a"],{attrs:{cols:"6"}},[e("Channels",{attrs:{setView:t.setView,channels:t.channels,getFile:t.getFile,postFile:t.postFile}})],1):t._e(),e(lt["a"],{attrs:{cols:"6"}},[e(w["a"],{attrs:{justify:"start"}},[e(lt["a"],{attrs:{cols:"12"}},[e("div",{ref:"box",staticClass:"box"},[e("div",{attrs:{id:"player"}})])])],1)],1)],1)},ts=[],es=s("1157"),ss=s.n(es);let is=0;const as=i["a"].observable({state:{}});function os(t,e,s,a){const o=t||"player",n=e||"455",l=s||"700",r=a||"M7lc1UVf-VE";function c(t){is++,i["a"].set(i["a"].prototype,"$yApi"+is,t.target),window.App.$store.commit("updatePlayerReady",{state:!0})}function d(t){if(t&&as.state)switch(t.data){case 0:as.state.stopVideo();break;case-1:case 1:case 2:case 3:window.App.$store.commit("updatePlayerReady",{state:!0});break;case 5:default:}}window.YT.ready((function(){new window.YT.Player(o,{height:n,width:l,videoId:r,events:{onReady:c,onStateChange:d}})}))}Object.defineProperty(i["a"].prototype,"$yApi",{get(){return as.state},set(t){as.state=t}}),Object.defineProperty(i["a"].prototype,"$yApi1",{get(){return as.state},set(t){as.state=t}}),Object.defineProperty(i["a"].prototype,"$yApi2",{get(){return as.state},set(t){as.state=t}});var ns=s("adda"),ls=s("3a2f"),rs=function(){var t=this,e=t._self._c;return e("div",[e(J["a"],{staticClass:"overflow-auto",attrs:{height:"500"}},[e(Vt["a"],{attrs:{fluid:""}},[e(w["a"],{attrs:{dense:""}},t._l(t.currentPlayList,(function(s,i){return e(lt["a"],{key:s.id+i,attrs:{cols:3}},[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e(J["a"],t._g(t._b({},"v-card",a,!1),i),[e(ns["a"],{staticClass:"white--text align-end",attrs:{src:s.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"},on:{click:function(e){return t.changeVideo(s.id,s.title)}}},[e(nt["c"],{domProps:{textContent:t._s(s.duration)}})],1),e(nt["c"],{staticClass:"pa-0 text-h6"},[e("div",{staticClass:"headerClass"},[t._v(" "+t._s(s.title)+" ")])]),e(nt["b"],[e(w["a"],{attrs:{align:"center"}},[e(H["a"],{attrs:{icon:""}},[s.favorite?e(d["a"],{attrs:{size:"24px"},on:{click:function(e){return t.addFavorite(s)}}},[t._v(" mdi-star ")]):e(d["a"],{attrs:{size:"24px"},on:{click:function(e){return t.addFavorite(s)}}},[t._v(" mdi-star-outline ")])],1)],1)],1)],1)]}}],null,!0)},[e("span",[e("p",[t._v("Title : "+t._s(s.title))]),e("p",[t._v(" Published at : "+t._s(s.publishedAt))]),e("p",[t._v("Description : "+t._s(s.description))]),e("p",[t._v("Channel : "+t._s(s.channelTitle))])])])],1)})),1)],1)],1)],1)},cs=[],ds={name:"VideosView",props:{getFile:{type:Function,default:()=>{}},postFile:{type:Function,default:()=>{}},playList:{type:Array,default:()=>[]},changeVideo:{type:Function,default:()=>{}}},data(){return{currentConfig:{},currentPlayList:[],favoritesPlayList:null}},watch:{"$store.state.trafficlawstore.config":{handler:function(){const{config:t}=this.$store.state.trafficlawstore;t&&(this.currentConfig=t,t&&null===this.favoritesPlayList&&this.getFile(t.playListFile,t=>{t&&(this.favoritesPlayList=t),0===this.currentPlayList.length&&t&&(this.currentPlayList=t),this.initFavorites()}))},immediate:!0},playList:{handler:function(){this.currentPlayList=Object.assign([],this.playList),this.initFavorites()},immediate:!0}},methods:{initFavorites:function(){this.playList&&this.favoritesPlayList&&(this.currentPlayList=this.currentPlayList.map(t=>(this.favoritesPlayList.some(e=>t.id===e.id)?t.favorite=!0:t.favorite=!1,t)),this.$store.commit("updateCurrentPlayList",this.currentPlayList))},flushPlayList:function(){const{appFolder:t,playListFile:e}=this.currentConfig;t&&e&&(this.postFile(t,e,this.favoritesPlayList),this.$store.commit("updateCurrentPlayList",this.currentPlayList))},removeFavorite:function(t){!t.favorite&&this.favoritesPlayList.some(e=>e.id===t.id)&&(this.favoritesPlayList=this.favoritesPlayList.filter(e=>e.id!==t.id),this.currentPlayList=this.currentPlayList.map(e=>(e.id===t.id&&(e.favorite=!1),e)),this.flushPlayList())},updateFavorite:function(t){t.favorite&&!this.favoritesPlayList.some(e=>e.id===t.id)?(this.favoritesPlayList=[...this.favoritesPlayList,t],this.flushPlayList()):this.removeFavorite(t)},addFavorite:function(t){t&&(this.currentPlayList=this.currentPlayList.map(e=>(e.id===t.id&&(e.favorite=!t.favorite||!t.favorite,t.favorite=e.favorite),e)),this.updateFavorite(t))}}},us=ds,hs=(s("3a3a"),Object(it["a"])(us,rs,cs,!1,null,"a5b44b44",null)),ps=hs.exports,fs=s("ac7c"),ms=function(){var t=this,e=t._self._c;return e(J["a"],{staticClass:"overflow-auto",attrs:{height:"500"}},[e(Vt["a"],[e(w["a"],t._l(t.cuts,(function(s,i){return e(lt["a"],{key:s.videoId+i,attrs:{cols:"12",md:"4"}},[e(J["a"],{attrs:{color:"mp3"===s.format?"primary":"red"}},[e(ns["a"],{staticClass:"white--text align-end",attrs:{src:s.src,height:"100"},on:{click:function(e){return t.playCut(s.videoId,s.startSeconds,s.endSeconds)}}},[e(nt["c"],{staticClass:"justify-end",attrs:{"background-color":"light-blue"}},[t._v(" "+t._s(s.duration)+" ")])],1),e(nt["c"],{staticClass:"pa-1"},[e("div",{staticClass:"headerClass"},[t._v(" "+t._s(s.title)+" ")])]),e(nt["b"],[e(w["a"],{attrs:{align:"center"}},[e(fs["a"],{staticClass:"shrink mt-0",attrs:{"hide-details":"",color:"black",value:s},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),e(d["a"],{on:{click:function(e){return t.editCut(s)}}},[t._v("mdi-movie-open-edit-outline")]),e(d["a"],{on:{click:function(e){return t.removeCut(s)}}},[t._v("mdi-movie-open-remove-outline")])],1)],1)],1)],1)})),1)],1),e("FloatDialog",{attrs:{title:"EditCut",showDialog:t.dialog,setShowDialog:t.setShowDialog},scopedSlots:t._u([{key:"form",fn:function({dialog:s}){return[e("EditCutForm",{attrs:{save:t.save,dialog:s,editedItem:t.editedItem}})]}}])}),e("FloatDialog",{attrs:{title:"Download",showDialog:t.downloadDialog,setShowDialog:t.setDownloadDialog},scopedSlots:t._u([{key:"form",fn:function({dialog:s}){return[e("DownloadDialog",{attrs:{dialog:s,stopAll:t.stopAll,removeCut:t.removeCut,downloadStack:t.selected,waitingList:t.waitingList,restoreItem:t.restoreItem,stopDownloadItem:t.stopDownloadItem,completeDownload:t.completeDownload,currentDownloadItem:t.currentDownloadItem}})]}},{key:"buttons",fn:function(){return[e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.startDownloads}},[t._v(" Start ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.stopDownloads}},[t._v(" Stop ")])]},proxy:!0}])})],1)},gs=[],vs=function(){var t=this,e=t._self._c;return e("div",[e(nt["b"],[e(rt["a"],{ref:"form",attrs:{"lazy-validation":""}},[e(w["a"],[e(lt["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Title"},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1),e(lt["a"],{staticClass:"pa-2",attrs:{cols:"8"}},[e(ze["a"],{staticClass:"align-center",attrs:{min:0,step:"0.5",max:t.getDuration,label:"Start"},scopedSlots:t._u([{key:"append",fn:function(){return[e(C["a"],{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{type:"number",step:"0.5",min:0},model:{value:t.item.startSeconds,callback:function(e){t.$set(t.item,"startSeconds",t._n(e))},expression:"item.startSeconds"}})]},proxy:!0}]),model:{value:t.item.startSeconds,callback:function(e){t.$set(t.item,"startSeconds",e)},expression:"item.startSeconds"}})],1),e(lt["a"],{staticClass:"pa-4",attrs:{cols:"4"}},[e(H["a"],{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.defineStart}},[t._v(" Define start ")])],1),e(lt["a"],{staticClass:"pa-2",attrs:{cols:"8"}},[e(ze["a"],{staticClass:"align-center",attrs:{min:0,step:"0.5",max:t.getDuration,label:"End"},scopedSlots:t._u([{key:"append",fn:function(){return[e(C["a"],{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{type:"number",step:"0.5",min:0},model:{value:t.item.endSeconds,callback:function(e){t.$set(t.item,"endSeconds",t._n(e))},expression:"item.endSeconds"}})]},proxy:!0}]),model:{value:t.item.endSeconds,callback:function(e){t.$set(t.item,"endSeconds",e)},expression:"item.endSeconds"}})],1),e(lt["a"],{staticClass:"pa-4",attrs:{cols:"4"}},[e(H["a"],{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.defineEnd}},[t._v(" Define end ")])],1),e(oe["a"],{attrs:{label:"Format",items:t.formats},model:{value:t.item.format,callback:function(e){t.$set(t.item,"format",e)},expression:"item.format"}}),e(lt["a"],{attrs:{cols:"12"}},[e(H["a"],{attrs:{color:"primary",text:""},on:{click:t.play}},[t._v(" Play ")]),e(H["a"],{attrs:{color:"primary",text:""},on:{click:function(e){return t.save(t.item)}}},[t._v(" Save ")])],1)],1)],1)],1)],1)},ys=[],ws={name:"EditCutForm",props:{editedItem:{type:Object,default:()=>null},dialog:{type:Boolean,default:()=>!1},save:{type:Function,default:()=>{}}},watch:{dialog:function(){this.dialog&&(this.progress=0)},editedItem:{handler:function(){this.dialog&&this.editedItem&&(this.item=this.editedItem)},immediate:!0}},computed:{getDuration:function(){return this.$yApi1.getDuration()}},data(){return{cuts:[],item:{start:0,end:64,format:"mp3"},formats:["mp3","mp4"]}},mixins:[k],mounted(){this.progress=0},methods:{getVideoId:function(){let t=null;const e=new URL(this.$yApi1.getVideoUrl());return e&&(t=e.searchParams.get("v")),t},defineStart:function(){const t=this.getVideoId();t&&(this.start=this.$yApi1.getCurrentTime())},defineEnd:function(){const t=this.getVideoId();t&&(this.end=this.$yApi1.getCurrentTime())},play:function(){const t=this.getVideoId();t&&this.$yApi1.loadVideoById({videoId:t,startSeconds:this.start,endSeconds:this.end})}}},bs=ws,Cs=Object(it["a"])(bs,vs,ys,!1,null,null,null),xs=Cs.exports,_s=s("71a3"),Is=s("c671"),ks=s("fe57"),Fs=s("aac8"),Ds=function(){var t=this,e=t._self._c;return e(J["a"],{staticClass:"overflow-auto",attrs:{height:"500"}},[e(ks["a"],{attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(_s["a"],[t._v(" In progress ")]),e(_s["a"],[t._v(" Downloaded ")]),e(_s["a"],[t._v(" Waiting ")])],1),e(Fs["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(Is["a"],[e(J["a"],{attrs:{flat:""}},t._l(t.cuts,(function(s,i){return e(h["a"],{key:s.videoId+i},[e(m["a"],[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e(m["b"],t._g(t._b({},"v-list-item-title",a,!1),i),[t._v(" "+t._s("title : "+s.title+", format : "+s.format+", duration : "+s.duration)+" ")])]}}],null,!0)},[e("span",[t._v(" "+t._s("title : "+s.title+", format : "+s.format+", duration : "+s.duration+", format : "+s.format))])]),e(w["a"],[e(lt["a"],{staticClass:"pr-0",attrs:{cols:"10"}},[e(ct["a"],{attrs:{height:"28"},model:{value:s.progress,callback:function(e){t.$set(s,"progress",e)},expression:"item.progress"}},[e("strong",[t._v(t._s(s.progress)+"%")])])],1),e(lt["a"],{staticClass:"pa-0 mt-3",attrs:{cols:"2"}},[e(d["a"],{on:{click:function(e){return t.stopDownload(s)}}},[t._v("mdi-stop")]),e(d["a"],{on:{click:function(e){return t.deleteItem(s)}}},[t._v("mdi-delete")])],1)],1)],1)],1)})),1)],1),e(Is["a"],[e(J["a"],{attrs:{flat:""}},t._l(t.downloaded,(function(s,i){return e(h["a"],{key:s.videoId+i},[e(m["a"],[e(m["b"],[t._v(" "+t._s("title : "+s.title+", format : "+s.format+", duration : "+s.duration)+" ")]),e(ct["a"],{attrs:{height:"28"},model:{value:s.progress,callback:function(e){t.$set(s,"progress",e)},expression:"item.progress"}},[e("strong",[t._v(t._s(s.progress)+"%")])])],1)],1)})),1)],1),e(Is["a"],[e(J["a"],{attrs:{flat:""}},t._l(t.waitList,(function(s,i){return e(h["a"],{key:s.videoId+i},[e(m["a"],[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e(m["b"],t._g(t._b({},"v-list-item-title",a,!1),i),[t._v(" "+t._s("title : "+s.title+", format : "+s.format+", duration : "+s.duration)+" ")])]}}],null,!0)},[e("span",[t._v(" "+t._s("title : "+s.title+", format : "+s.format+", duration : "+s.duration+", format : "+s.format))])]),e(w["a"],[e(lt["a"],{staticClass:"pr-0",attrs:{cols:"10"}},[e(ct["a"],{attrs:{value:s.progress,height:"28","aria-disabled":""}},[e("strong",[t._v(t._s(s.progress)+"%")])])],1),e(lt["a"],{staticClass:"pa-0 mt-3",attrs:{cols:"2"}},[e(d["a"],{on:{click:function(e){return t.restoreItem(s)}}},[t._v("mdi-replay")]),e(d["a"],{on:{click:function(e){return t.deleteItem(s)}}},[t._v("mdi-delete")])],1)],1)],1)],1)})),1)],1)],1)],1)},Ss=[],Vs={name:"DownloadDialog",props:{stopAll:{type:Boolean,default:()=>!1},currentDownloadItem:{type:Object,default:()=>null},waitingList:{type:Array,default:()=>[]},completeDownload:{type:Array,default:()=>[]},downloadStack:{type:Array,default:()=>[]},restoreItem:{type:Function,default:()=>{}},stopDownloadItem:{type:Function,default:()=>{}},removeCut:{type:Function,default:()=>{}}},watch:{stopAll:{handler:function(){this.stopAll&&(this.cuts=[],this.stopProgress=!0)},immediate:!0},completeDownload:{handler:function(){this.completeDownload&&(this.downloaded=this.completeDownload.map(t=>({...t,progress:100})),this.cuts=this.cuts.filter(t=>!this.existItem(this.downloaded,t)))},immediate:!0},downloadStack:{handler:function(){this.downloadStack&&(this.cuts=this.downloadStack.map(t=>({...t,progress:0}))),this.currentDownloadItem&&!this.existItem(this.completeDownload,this.currentDownloadItem)&&this.cuts.unshift(this.currentDownloadItem)},immediate:!0},currentDownloadItem:{handler:function(){const t="https://trafficlaws-server.vercel.app/trafficlaws/google/youtube/download/progress";this.currentDownloadItem&&this.getProgress(t,this.currentDownloadItem)},immediate:!0},waitingList:{handler:function(){this.waitingList&&(this.waitList=Object.assign([],this.waitingList))},immediate:!0}},data(){return{cuts:[],tab:null,waitList:[],downloaded:[],stopProgress:!1}},mixins:[k],methods:{sameItem:function(t,e){let s=!1;return t&&e&&(s=t.videoId===e.videoId&&t.duration===e.duration&&t.startSeconds===e.startSeconds&&t.endSeconds===e.endSeconds&&t.format===e.format),s},existItem:function(t,e){return t.some(t=>t.videoId===e.videoId&&t.duration===e.duration&&t.startSeconds===e.startSeconds&&t.endSeconds===e.endSeconds&&t.format===e.format)},setItemProgress:function(t,e){t&&(this.cuts=this.cuts.map(s=>s.videoId===t.videoId&&s.duration===t.duration&&s.startSeconds===t.startSeconds&&s.endSeconds===t.endSeconds&&s.format===t.format?{...s,progress:e}:s))},deleteItem:function(t){t&&(this.sameItem(this.currentDownloadItem,t)&&(this.stopProgress=!0),this.cuts=this.cuts.filter(e=>!this.sameItem(e,t)),this.removeCut(t))},stopDownload:function(t){t&&this.stopDownloadItem(t,!0)},getProgress:function(t,e){let s;e&&e.videoId?this.getData(t+"?videoId="+e.videoId+"&format="+e.format,i=>{i&&(s=Number(i.download),this.setItemProgress(e,s),100!==this.progress&&setTimeout(()=>{this.getProgress(t,e)},2e3))}):this.stopProgress=!1}}},Ps=Vs,Rs=Object(it["a"])(Ps,Ds,Ss,!1,null,null,null),As=Rs.exports,Ts={name:"CutsView",components:{EditCutForm:xs,FloatDialog:yt,DownloadDialog:As},props:{cutsSelections:{type:Array,default:()=>[]},playCut:{type:Function,default:()=>{}}},watch:{"$store.state.trafficlawstore.downloadDialog":{handler:function(){const{downloadDialog:t}=this.$store.state.trafficlawstore;t&&(this.downloadDialog=t)},immediate:!0},"$store.state.studio.selectCuts":{handler:function(){const{selectCuts:t}=this.$store.state.studio;t&&(this.selected=t.state?Object.assign([],this.cuts):[])},immediate:!0},"$store.state.studio.clearCuts":{handler:function(){const{clearCuts:t}=this.$store.state.studio;t&&(this.stopAll=!1,this.stopDownload=!1,this.selected=[],this.cuts=[],this.$store.commit("updateCutsCpt",{value:this.cuts.length}))},immediate:!0},cutsSelections:{handler:function(){this.cutsSelections&&(this.cuts=this.cutsSelections,0===this.selected.length?this.selected=[]:this.selected=Object.assign([],this.selected))},immediate:!0},selected:{handler:function(t){t&&(this.downloadStack=Object.assign([],t))},immediate:!0,deep:!0}},data(){return{cuts:[],stop:!1,selected:[],dialog:!1,editedItem:{},editedIndex:-1,defaultItem:{},downloading:!1,downloadStack:[],completeDownload:[],downloadDialog:!1,currentDownloadItem:null}},mixins:[k,Y],methods:{restoreItem:function(t){let e;t&&(this.existItem(this.cuts,t)||this.cuts.push(t),e=this.cuts.find(e=>this.sameItem(e,t)),e&&this.selected.push(e),this.waitingList=this.waitingList.filter(e=>!this.sameItem(e,t)))},editCut:function(t){this.editedIndex=this.cuts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},removeCut:function(t){t&&(this.editedIndex=this.cuts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0,this.deleteItemConfirm(t),this.stopDownloadItem(t))},deleteItemConfirm(t){-1!==this.editedIndex?this.cuts.splice(this.editedIndex,1):t&&(this.cuts=this.cuts.filter(e=>!this.sameItem(e,t))),this.closeDelete()},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},sameItem:function(t,e){let s=!1;return t&&e&&(s=t.videoId===e.videoId&&t.duration===e.duration&&t.startSeconds===e.startSeconds&&t.endSeconds===e.endSeconds&&t.format===e.format),s},existItem:function(t,e){return t.some(t=>t.videoId===e.videoId&&t.duration===e.duration&&t.startSeconds===e.startSeconds&&t.endSeconds===e.endSeconds&&t.format===e.format)},stopDownloadItem:function(t,e){t&&(this.abortController&&this.sameItem(this.currentDownloadItem,t)&&(this.stopDownload=!0,this.abortController.abort(),this.currentDownloadItem=null),this.selected=this.selected.filter(e=>!this.sameItem(e,t)),e&&this.waitingList.push(t))},stopDownloads:function(){this.stopAll=!0,this.abortController&&(this.abortController.abort(),this.selected=[],this.currentDownloadItem=null)},startDownloads:function(){this.downloading||(this.downloading=!0,this.downloadCuts(()=>{this.downloading=!1,this.stopAll&&(this.stopAll=!1)}))},downloadCuts:function(t){let e;0<this.selected.length&&(e=this.selected.pop(),e&&!this.existItem(this.completeDownload,e)?(this.stopDownload=!1,this.currentDownloadItem=e,this.abortController=new AbortController,this.downloadFile({start:e.startSeconds,end:e.endSeconds,yUrl:e.yUrl,format:e.format,videoId:e.videoId,title:e.title},this.abortController,()=>{this.stopAll||this.stopDownload||this.completeDownload.push(e),this.stopAll||this.downloadCuts()})):this.stopAll?t&&t():this.downloadCuts())},setShowDialog:function(){this.dialog=!this.dialog},setDownloadDialog:function(){this.downloadDialog=!this.downloadDialog,this.$store.commit("updateDownloadDialog",!1)},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(t){this.editedIndex>-1?Object.assign(this.cuts[this.editedIndex],t):this.cuts.push(t),this.close()}}},$s=Ts,Ls=(s("3e7d"),Object(it["a"])($s,ms,gs,!1,null,"35bdcea6",null)),Os=Ls.exports,js=function(){var t=this,e=t._self._c;return e(J["a"],{staticClass:"overflow-auto",attrs:{height:"500"}},[e(ks["a"],{attrs:{dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(_s["a"],[t._v(" Channels ")]),e(_s["a"],[t._v(" Favorites ")])],1),e(Fs["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(Is["a"],[e(J["a"],{staticClass:"mx-auto"},[e(Vt["a"],{attrs:{fluid:""}},[e(w["a"],{attrs:{dense:""}},t._l(t.getChannels,(function(s,i){return e(lt["a"],{key:s.id+i,attrs:{cols:3}},[e(J["a"],[e(ns["a"],{staticClass:"white--text align-end",attrs:{src:s.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"},on:{click:function(e){return t.switchChannel(s)}}}),e(nt["c"],{staticClass:"pa-1"},[e("div",{staticClass:"headerClass"},[t._v(" "+t._s(s.title)+" ")])]),e(nt["b"],[e(w["a"],{attrs:{align:"center"}},[e(H["a"],{attrs:{icon:""}},[s.favorite?e(d["a"],{attrs:{size:"24px"},on:{click:function(e){return t.setFavorite(s)}}},[t._v(" mdi-star ")]):e(d["a"],{attrs:{size:"24px"},on:{click:function(e){return t.setFavorite(s)}}},[t._v(" mdi-star-outline ")])],1)],1)],1)],1)],1)})),1)],1)],1)],1),e(Is["a"],[e(J["a"],{staticClass:"mx-auto"},[e(Vt["a"],{attrs:{fluid:""}},t._l(Object.keys(t.getFavorite),(function(s,i){return e(w["a"],{key:i,attrs:{dense:""}},[0<Object.values(t.getFavorite)[i].length?e(lt["a"],{attrs:{cols:"12"}},[e("div",{staticClass:"text-h6 mb-1"},[t._v(" "+t._s(s)+" ")])]):t._e(),t._l(Object.values(t.getFavorite)[i],(function(s,i){return e(lt["a"],{key:s.id+i,attrs:{cols:3}},[e(J["a"],[e(ns["a"],{staticClass:"white--text align-end",attrs:{src:s.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"},on:{click:function(e){return t.switchChannel(s)}}}),e(nt["c"],{staticClass:"pa-1"},[e("div",{staticClass:"headerClass"},[t._v(" "+t._s(s.title)+" ")])]),e(nt["b"],[e(w["a"],{attrs:{align:"center"}},[e(H["a"],{attrs:{icon:""}},[s.favorite?e(d["a"],{attrs:{size:"24px"},on:{click:function(e){return t.removeFavorite(s,!0)}}},[t._v(" mdi-star ")]):t._e()],1)],1)],1)],1)],1)}))],2)})),1)],1)],1)],1),e("FloatDialog",{attrs:{title:"EditCut",showDialog:t.dialog,setShowDialog:t.setShowDialog},scopedSlots:t._u([{key:"form",fn:function({dialog:s}){return[e("EditCutForm",{attrs:{save:t.save,dialog:s,editedItem:t.editedItem}})]}}])})],1)},Ns=[],Ms={name:"Channels",components:{EditCutForm:xs,FloatDialog:yt},props:{setView:{type:Function,default:()=>{}},channels:{type:Array,default:()=>[]},addFavoriteChannel:{type:Function,default:()=>{}},getFile:{type:Function,default:()=>{}},postFile:{type:Function,default:()=>{}}},watch:{channels:{handler:function(){this.setFavorites()},immediate:!0},"$store.state.trafficlawstore.config":{handler:function(){const{config:t}=this.$store.state.trafficlawstore;t&&(this.fileName=t.favoritesFile,this.folderName=t.appFolder)},immediate:!0},"$store.state.studio.favoritesChannels":{handler:function(){const{favoritesChannels:t}=this.$store.state.studio;t&&(this.favoritesChannels=t.map(t=>({...t,favorite:!0})),0===this.currentChannels.length&&(this.currentChannels=this.favoritesChannels),this.setFavorites())},immediate:!0}},data(){return{tab:null,cuts:[],dialog:!1,editedItem:{},editedIndex:-1,defaultItem:{},currentChannels:[],favoritesChannels:[],fileName:"favorite.json",folderName:"FavoriteChannels"}},computed:{getFavorite:function(){let t={Default:[]};return this.favoritesChannels.forEach(e=>{e.category?e.category.forEach(s=>{void 0===t[s]&&(t[s]=[]),t[s].push(e)}):t["Default"].push(e)}),t},getChannels:function(){return Object.assign([],this.currentChannels)}},methods:{flushFavorites:function(){this.favoritesChannels&&(console.log("flushFavorites : ",this.favoritesChannels),this.postFile(this.folderName,this.fileName,this.favoritesChannels,t=>{console.log("test in callBack : ",t),this.$store.commit("updateFavoritesChannels",this.favoritesChannels)}))},setFavorites:function(){this.channels&&0<this.channels.length&&(this.currentChannels=this.channels.map(t=>(this.favoritesChannels.some(e=>t.id===e.id)&&(t.favorite=!0),t)))},removeFavorite:function(t,e){let s,i,a;t.favorite&&!e||!this.favoritesChannels.some(e=>e.id===t.id)||(i=Object.assign([],this.channels),s=Object.assign([],this.favoritesChannels),a=s.filter(e=>e.id!==t.id),this.currentChannels=i.map(e=>(e.id===t.id&&(e.favorite=!1),e)),this.favoritesChannels=a,this.flushFavorites())},updateFavorite:function(t){t.favorite&&!this.favoritesChannels.some(e=>e.id===t.id)?(this.favoritesChannels=[...this.favoritesChannels,t],this.flushFavorites()):this.removeFavorite(t)},setFavorite:function(t){t&&(this.currentChannels=this.currentChannels.map(e=>(e.id===t.id&&(e.favorite=!t.favorite||!t.favorite,t.favorite=e.favorite),e)),this.updateFavorite(t))},switchChannel:function(t){t&&this.setView("videosView",t)},setShowDialog:function(){this.dialog=!this.dialog},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(t){this.editedIndex>-1?Object.assign(this.cuts[this.editedIndex],t):this.cuts.push(t),this.close()}}},Bs=Ms,Es=(s("8eb9"),Object(it["a"])(Bs,js,Ns,!1,null,"62e4d8c7",null)),zs=Es.exports,Us={name:"Players",props:{setView:{type:Function,default:()=>{}},playList:{type:Array,default:()=>[]},channels:{type:Array,default:()=>[]},view:{type:String,default:()=>!0}},watch:{"$store.state.trafficlawstore.cuts":{handler:function(){const{cuts:t}=this.$store.state.trafficlawstore;t&&(this.cuts=t)},immediate:!0}},data(){return{cuts:[],playerVideoId:"11-lpoJHu0U"}},mixins:[k,Y],components:{CutsView:Os,VideosView:ps,Channels:zs},mounted(){this.boundPlayer()},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{boundPlayer:function(){let t;const e=this.$refs.box.clientWidth;e&&(t=Math.floor(.99*Number(this.$refs.box.clientWidth)),this.initPlayer(t),window.addEventListener("resize",this.onResize))},onResize:function(){const t=Math.floor(.99*Number(this.$refs.box.clientWidth));ss()("#player").width(t)},initPlayer:function(t){ss()(document).ready((function(){ss.a.getScript("https://www.youtube.com/iframe_api",(function(){os(null,null,t,this.playerVideoId)}))}))},changeVideo:function(t){const{loadVideoById:e}=this.$yApi1;t&&e&&(this.playerVideoId=t,this.$yApi1.loadVideoById({videoId:t}))},playCut:function(t,e,s){t&&this.$yApi1.loadVideoById({videoId:t,startSeconds:e,endSeconds:s})}}},Qs=Us,qs=Object(it["a"])(Qs,Ze,ts,!1,null,"50e18b73",null),Gs=qs.exports,Ys={name:"Studio",components:{NavBar:We,Players:Gs,Footer:ae},data(){return{channelId:null,view:"videosView"}},methods:{setView:function(t,e){this.view=t,e&&(this.channelId=e.id)}}},Hs=Ys,Js=Object(it["a"])(Hs,Ut,Qt,!1,null,null,null),Xs=Js.exports,Ks=function(){var t=this,e=t._self._c;return e(Vt["a"],[e("DualLayout",{attrs:{tabs:t.tabs,tabIndex:t.tabIndex,responses:t.responses,videoId:t.playerVideoId,enableEditMode:t.enableEditMode,resetResponses:t.resetResponses},scopedSlots:t._u([{key:"videoPlayer",fn:function(){return[e("VideoPlayer",{attrs:{height:t.height,videos:t.videos,playerVideoId:t.playerVideoId}})]},proxy:!0},{key:"videoPlayList1",fn:function(){return[e("VideoPlayList",{attrs:{height:t.height,vertical:!0,videos:t.videos,channels:t.channels,numberOfItems:t.numberOfVideo,getNextVideos:t.getNextVideos,updatePlayer:t.updatePlayer,playerVideoId:t.playerVideoId,nextPageToken:t.nextPageToken,channelNextPageToken:t.channelNextPageToken}})]},proxy:!0},{key:"videoPlayList2",fn:function(){return[e("VideoPlayList",{attrs:{height:t.height,vertical:!0,showChannel:!0,channels:t.channels,changeVideos:t.changeVideos,numberOfItems:t.numberOfVideo,playerVideoId:t.playerVideoId,nextPageToken:t.nextPageToken,getNextChannels:t.getNextChannels,channelNextPageToken:t.channelNextPageToken}})]},proxy:!0},{key:"videoQCM",fn:function(){return[e("VideoQCM",{attrs:{height:t.height,editMode:t.editMode,responses:t.responses,videoId:t.playerVideoId,enableEditMode:t.enableEditMode}})]},proxy:!0},{key:"videoStates",fn:function(){return[e("VideoStates",{attrs:{nbrQuestions:t.nbrQuestions,playerVideoId:t.playerVideoId}})]},proxy:!0}])})],1)},Ws=[],Zs=s("3e8f"),ti=s.n(Zs);const ei="utf8",si="./../data/";function ii(t,e,s){const i=JSON.stringify(t);ti.a.writeFileSync(e,i),console.log("json : ",i,", ",e,ti.a),ti.a.writeFile(si+e,i,ei,s)}var ai=function(){var t=this,e=t._self._c;return e("QCMLayout",{attrs:{responses:t.defaultResponses},scopedSlots:t._u([{key:"Qs",fn:function({i:s}){return[e("strong",{staticClass:"d-flex align-center pa-2"},[t._v(t._s(s+1)+".")]),t._l(t.questions.length,(function(i){return e(fs["a"],{key:i,staticClass:"pa-1",attrs:{label:t.questions[i-1],value:t.questions[i-1]+s},model:{value:t.seleted,callback:function(e){t.seleted=e},expression:"seleted"}})}))]}},{key:"Rs",fn:function({i:s,res:i}){return t._l(i.length,(function(a){return e(J["a"],{key:"r"+(i.length*(s-1)+a),staticClass:"d-flex justify-center align-center mt-4",attrs:{color:i[a-1].color,height:"30",width:"30"},on:{click:function(e){return t.setResponseColor(s,a)}}},[t._v(" "+t._s(i[a-1].label)+" ")])}))}}])})},oi=[],ni=function(){var t=this,e=t._self._c;return e(J["a"],{staticClass:"overflow-y-auto overflow-x-hidden",attrs:{height:t.height,outlined:""}},[e(Vt["a"],[e(w["a"],{staticClass:"fill-width"},[e(lt["a"],{attrs:{cols:"12",sm:"12"}},t._l(t.responses,(function(s,i){return e(w["a"],{key:i,staticClass:"fill-width"},[t._t("Qs",null,{i:i}),e("div",{staticClass:"ml-5"}),t._t("Rs",null,{i:i,res:s})],2)})),1)],1)],1)],1)},li=[],ri={name:"QCMLayout",props:{height:{type:Number,default:450},responses:{type:Array,default:()=>[]}},data:()=>({}),methods:{}},ci=ri,di=Object(it["a"])(ci,ni,li,!1,null,null,null),ui=di.exports,hi=(s("13d5"),{data:()=>({}),watch:{},methods:{modelToView:function(t,e){let s;t&&(s=t.map(t=>Array.from({length:4},(e,s)=>{const i=String.fromCharCode(65+s);return t.includes(i)?{label:i,color:"green"}:{label:i,color:"red"}}))),e&&e(s)},viewToModel:function(t,e,s){let i,a;e&&(i=Array.from({length:40},(e,s)=>{const i=Object.keys(t||{});return t&&i.some(t=>Number(t)===s)?t[s]:[]}),a=e.map(t=>t.map(t=>"red"===t.color?"":t.label).filter(t=>""!==t))),s&&s({v1:i,v2:a})},getDefaultResponse:function(t,e){let s=[];return void 0!==t&&(s=Array.from({length:t},()=>Array.from({length:e},(t,e)=>{const s=String.fromCharCode(65+e);return{label:s,color:"red"}}))),s},evaluateResponses:function(t,e,s){let i,a,o,n;e&&t&&(i=t.map((t,s)=>(a=e[s],o=a?a.length:0,n=t?t.length:0,0===n||o!==n||a.some(e=>!t.some(t=>e===t))?0:1)),s&&s(i.reduce((t,e)=>Number(t)+Number(e),0)))},responsesToParameter:function({userResponses:t,defaultResponses:e},s){let i=[],a=[];t&&e&&(t.forEach(t=>{Object.keys(t).forEach(s=>{this.evaluateResponses(t[s],e,t=>{i.push(s),a.push(t)})})}),s&&s({name:this.playerVideoId,x:i,y:a,color:"rgba(245, 40, 145, 0.8)"}))},responsesToData:function(t,e,s,i){let a={};const{vResponse:o}=this.$store.state.trafficlawstore;let n=o&&o.userResponses?o.userResponses:[];t&&(a[(new Date).toISOString()]=t,n=[...n,a]),e&&i&&i({videoId:s,userResponses:n,defaultResponses:e})}}}),pi={name:"VideoQCM",components:{QCMLayout:ui},props:{height:{type:Number},editMode:{type:Boolean},videoId:{type:String},responses:{type:Array,default:()=>[]}},data:()=>({numRegex:/\d*/g,alphaRegex:/[A-Z]/g,seleted:[],nbrQuestions:40,userResponses:{},questions:["A","B","C","D"],currentArchives:[],currentResponses:[],defaultResponses:[]}),mixins:[k,hi],watch:{"$store.state.trafficlawstore.vResponse":{handler:function(){const{vResponse:t}=this.$store.state.trafficlawstore,e=t?t.defaultResponses:null;e&&0===e.length&&(this.defaultResponses=this.getDefaultResponse(40,4))},immediate:!0},"$store.state.trafficlawstore.showResponse":{handler:function(){const{showResponse:t,defaultResponses:e}=this.$store.state.trafficlawstore;t&&e&&0<e.length?this.defaultResponses=e:this.defaultResponses=this.getDefaultResponse(40,4)},immediate:!0},seleted:{handler:function(t,e){let s;e&&t&&(s=e.length<t.length?"add":"remove","add"===s?this.addResponse(t):this.removeResponse(t,e))},immediate:!0},responses:{handler:function(){if(this.responses){const{showResponse:t,defaultResponses:e}=this.$store.state.trafficlawstore;this.defaultResponses=t?e:this.getDefaultResponse(40,4)}},immediate:!0}},methods:{setResponseColor:function(t,e){let s;const{showResponse:i}=this.$store.state.trafficlawstore;this.editMode&&this.defaultResponses[t][e-1]&&i&&(s=this.defaultResponses[t][e-1].color,this.defaultResponses.splice(t,1,this.defaultResponses[t].map((t,i)=>i===e-1?{label:t.label,color:"red"===s?"green":"red"}:t)),this.$store.commit("updateDefaultResponses",this.defaultResponses))},addResponse:function(t){let e,s,i=t[t.length-1];i&&(e=i.match(this.numRegex)[1],s=i.match(this.alphaRegex)[0],void 0===this.userResponses[e]&&(this.userResponses[e]=[]),this.userResponses[e].push(s),this.$store.commit("updateUserResponses",this.userResponses))},removeResponse:function(t,e){let s,i,a=e.find(e=>!t.some(t=>t===e));a&&(s=a.match(this.numRegex)[1],i=a.match(this.alphaRegex)[0],this.userResponses[s]=this.userResponses[s].filter(t=>t!==i),this.$store.commit("updateUserResponses",this.userResponses))}}},fi=pi,mi=Object(it["a"])(fi,ai,oi,!1,null,null,null),gi=mi.exports,vi=function(){var t=this,e=t._self._c;return e(J["a"],[e(w["a"],{staticClass:"text-center"},[e(lt["a"],{attrs:{cols:"7"}},[e(ks["a"],{staticClass:"pa-0",attrs:{left:"",color:"black accent-4"}},[e(_s["a"]),e(Is["a"],[t._t("videoPlayer")],2)],1)],1),e(lt["a"],{attrs:{cols:"5"}},[e(ks["a"],{staticClass:"pa-0",attrs:{left:"",color:"black accent-4"},model:{value:t.currenTabIndex,callback:function(e){t.currenTabIndex=e},expression:"currenTabIndex"}},[t._l(t.tabs,(function(s){return e(_s["a"],{key:s},[t._v(" "+t._s(s)+" ")])})),e(Is["a"],{staticClass:"pa-0"},[e(Vt["a"],{attrs:{fluid:""}},[t._t("videoPlayList1")],2)],1),e(Is["a"],{staticClass:"pa-0"},[e(Vt["a"],{attrs:{fluid:""}},[t._t("videoPlayList2")],2)],1),e(Is["a"],[e(Vt["a"],{attrs:{fluid:""}},[e("Actions",{attrs:{title:!0}}),t._t("videoQCM"),e("Actions",{attrs:{title:!1,videoId:t.videoId,responses:t.responses,enableEditMode:t.enableEditMode,resetResponses:t.resetResponses}})],2)],1),e(Is["a"],[e(Vt["a"],{attrs:{fluid:""}},[t._t("videoStates")],2)],1)],2)],1)],1)],1)},yi=[],wi=s("b81c"),bi=function(){var t=this,e=t._self._c;return e(J["a"],[t.title?e("div",[e(w["a"],{staticClass:"fill-width"},[e(lt["a"],{attrs:{cols:"6"}},[e("strong",[t._v("Questions")])]),e(lt["a"],{attrs:{cols:"6"}},[e("strong",[t._v("Réponses")])])],1)],1):e("div",[e(wi["a"],{attrs:{value:t.value,color:"primary"}},[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:t.setShowResponse}},"v-btn",i,!1),s),[t.showResponse?e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-eye-outline ")]):e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-eye-off-outline ")])],1)]}}])},[e("span",[t._v(t._s(t.message))])]),e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:t.resetResponses}},"v-btn",i,!1),s),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-restore ")])],1)]}}])},[e("span",[t._v("Restore responses")])]),e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:t.flushResponse}},"v-btn",i,!1),s),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-cloud-upload-outline ")])],1)]}}])},[e("span",[t._v("Upload responses")])]),e("DeleteDialog",{attrs:{videoId:t.videoId,removeFile:t.removeFile},scopedSlots:t._u([{key:"dialogButton",fn:function({deletedialog:s,attrs:i}){return[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"}},"v-btn",i,!1),{...s,...a}),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-file-document-remove-outline ")])],1)]}}],null,!0)},[e("span",[t._v("Remove file")])])]}}])})],1)],1),t.progress?e(ct["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}}):t._e()],1)},Ci=[],xi=function(){var t=this,e=t._self._c;return e(w["a"],[e(ht["a"],{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[t._t("dialogButton",null,{attrs:s,deletedialog:e})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(J["a"],[e(nt["c"],[t._v("Delete Folder")]),e(nt["b"],[t._v(t._s(t.message))]),e(nt["a"],[e(b["a"]),e(H["a"],{attrs:{color:"green darken-1",text:""},on:{click:t.remove}},[t._v(" OK ")]),e(H["a"],{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")])],1)],1)],1)],1)},_i=[],Ii={name:"DeleteDialog",props:{item:{type:Object,default:()=>null},message:{type:String,default:()=>"Do want to delete folder"},videoId:{type:String,default:()=>null},removeFolder:{type:Function,default:()=>{}},removeFile:{type:Function,default:()=>{}},removeElement:{type:Function,default:()=>{}}},data:()=>({dialog:!1}),watch:{},methods:{remove:function(){this.dialog=!1,this.item?this.removeElement(this.item):this.videoId&&this.removeFile(this.videoId)}}},ki=Ii,Fi=Object(it["a"])(ki,xi,_i,!1,null,"7ad19766",null),Di=Fi.exports,Si={name:"Actions",components:{DeleteDialog:Di},props:{responses:{type:Array,default:()=>[]},videoId:{type:String,default:()=>null},title:{type:Boolean,default:()=>!0},enableEditMode:{type:Function,default:()=>{}},resetResponses:{type:Function,default:()=>{}}},data:()=>({value:1,progress:!1,showResponse:!1,currentConfig:null,message:"Show responses"}),mixins:[k,Y,hi],watch:{"$store.state.trafficlawstore.config":{handler:function(){const{config:t}=this.$store.state.trafficlawstore;t&&(this.currentConfig=t)},immediate:!0}},methods:{setShowResponse:function(){this.showResponse=!this.showResponse,this.enableEditMode(),this.message=this.showResponse?"Hide reponses":"Show responses",this.$store.commit("updateShowResponse",this.showResponse)},flushResponse:function(){const t=this.videoId+".json",{tokens:e,userResponses:s,defaultResponses:i}=this.$store.state.trafficlawstore;e&&this.currentConfig&&this.viewToModel(s,i,({v1:e,v2:s})=>{this.responsesToData(e,s,this.videoId,e=>{this.progress=!0,this.postFile(this.currentConfig.appFolder,t,e,()=>{this.$store.commit("updateVResponse",e),this.progress=!1})})})},removeFile:function(t){const e=this.videoId+".json",{tokens:s,vResponse:i}=this.$store.state.trafficlawstore;s&&t&&(this.progress=!0,this.deleteFileByName(e,t=>{t&&(i.defaultResponses=[],this.$store.commit("updateUserResponses",[]),this.$store.commit("updateVResponse",i),this.$store.commit("updateDefaultResponses",[]),this.progress=!1)}))}}},Vi=Si,Pi=Object(it["a"])(Vi,bi,Ci,!1,null,"3ab231f0",null),Ri=Pi.exports,Ai={name:"DualLayout",components:{Actions:Ri},props:{tabs:{type:Array,default:()=>[]},tabIndex:{type:Object,default:()=>({value:0})},enableEditMode:{type:Function},responses:{type:Array},videoId:{type:String},resetResponses:{type:Function,default:()=>{}},getVideoResponses:{type:Function,default:()=>{}}},data:()=>({currenTabIndex:0}),watch:{tabIndex:{handler:function(){this.tabIndex&&(this.currenTabIndex=this.tabIndex.value)},immediate:!0}},methods:{}},Ti=Ai,$i=Object(it["a"])(Ti,vi,yi,!1,null,null,null),Li=$i.exports,Oi=function(){var t=this,e=t._self._c;return e(J["a"],{attrs:{height:t.height}},[e(w["a"],[e(lt["a"],{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[e("div",{attrs:{id:"player"}})]),e(lt["a"],{staticClass:"d-flex justify-center pa-0",attrs:{cols:"12"}},[e(nt["c"],{staticClass:"text-h6 text-center"},[t._v(" "+t._s(t.getTilte)+" ")])],1)],1)],1)},ji=[],Ni={name:"VideoPlayer",props:{height:{type:Number},playerVideoId:{type:String},videos:{type:Array,default:()=>[]}},data:()=>({autoplay:0,currentId:"",playerId:"player"}),mounted(){this.initPlayer()},watch:{playerVideoId:{handler:function(){this.changeVideo()},immediate:!0}},computed:{getVideoUrl:function(){const t="https://www.youtube.com/embed/",e="autoplay="+this.autoplay,s="&playlist="+this.videos.map(t=>t.id.videoId);return""===this.playerVideoId?t+"M7lc1UVf-VE":t+this.playerVideoId+"?"+e+s},getTilte:function(){const t=this.videos.find(t=>t.id.videoId===this.playerVideoId);return t?t.title:""}},methods:{initPlayer:function(){ss()(document).ready((function(){ss.a.getScript("https://www.youtube.com/iframe_api",(function(){os()}))}))},changeVideo:function(){const{loadVideoById:t}=this.$yApi1;t&&this.playerVideoId&&""!==this.playerVideoId&&this.$yApi1.loadVideoById({videoId:this.playerVideoId})}}},Mi=Ni,Bi=Object(it["a"])(Mi,Oi,ji,!1,null,null,null),Ei=Bi.exports,zi=s("1f4f"),Ui=function(){var t=this,e=t._self._c;return e("div",[e(w["a"],{staticClass:"mb-2"},t._l(t.statesOverView,(function(s){return e(lt["a"],{key:s.title,attrs:{cols:"6"}},[e(J["a"],{attrs:{height:"100",color:s.color}},[e(nt["c"],[t._v(" "+t._s(s.title)+" "+t._s(s.value)+" ")])],1)],1)})),1),e(J["a"],[e("Chart",{attrs:{point:t.point,parameters:t.parameters}}),e(zi["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v(" Date ")]),e("th",{staticClass:"text-left"},[t._v(" VideoId ")]),e("th",{staticClass:"text-left"},[t._v(" Score ")]),e("th",{staticClass:"text-left"},[t._v(" Action ")])])]),e("tbody",t._l(t.states,(function(s){return e("tr",{key:s.date},[e("td",{staticClass:"text-left"},[t._v(t._s(s.date))]),e("td",{staticClass:"text-left mt-1"},[e("VideoMenu",{attrs:{videoId:s.videoId},scopedSlots:t._u([{key:"VideoMenu",fn:function({vOn:i,attrs:a}){return[e("span",t._g(t._b({},"span",a,!1),i),[t._v(t._s(s.videoId))])]}}],null,!0)})],1),e("td",{staticClass:"text-left"},[t._v(t._s(s.score))]),e("td",{staticClass:"text-left"},[e("DeleteDialog",{attrs:{item:s,removeElement:t.removeElement},scopedSlots:t._u([{key:"dialogButton",fn:function({deletedialog:s,attrs:i}){return[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"}},"v-btn",i,!1),{...s,...a}),[e(d["a"],{attrs:{"aria-hidden":"false",small:""}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[e("span",[t._v("Delete folder")])])]}}],null,!0)})],1)])})),0)]},proxy:!0}])})],1)],1)},Qi=[],qi=function(){var t=this,e=t._self._c;return e("div",{key:t.componentKey,ref:"graph",attrs:{id:t.chartId}})},Gi=[],Yi={data:()=>({}),watch:{},methods:{updateChart:function(){this.chartDiv&&this.$Plotly.update(this.chartDiv,this.data,this.layout)},addTrace(t,e){t&&!this.data.some(e=>e.name===t.name)&&(e?this.$Plotly.addTraces(this.chartDiv,t):e||void 0!==this.data[0]||this.$Plotly.addTraces(this.chartDiv,t))},appendTrace:function(t){let e;const s=this.data;s&&t&&(e=s.find(e=>e.name===t.name),e.x=[...e.x,...t.x],e.y=void 0===e.z?[...e.y,...t.y]:e.y,e.z&&(e.z=[...e.z,...t.z]),this.updateChart())},prependTrace:function(t){let e;const s=this.data;s&&t&&(e=s.find(e=>e.name===t.name),e.x=[...t.x,...e.x],e.y=void 0===e.z?[...t.y,...e.y]:e.y,e.z&&(e.z=[...t.z,...e.z]),this.updateChart())},removeTracePoint:function(t){let e,s;const i=this.data;t&&(e=i.find(e=>e.name===t.videoId),s=e.x.findIndex(e=>e===t.date),-1!==s&&(e.x.splice(s,1),e.y.splice(s,1),this.updateChart()))},removeTrace:function(t,e){t&&(this.data=this.data.filter(e=>!t.some(t=>t.name===e.name)),this.$Plotly.react(this.chartDiv,this.data,this.layout,this.config),e&&e())},setTraceSelectMode:function(t){t&&(t.selected={marker:{opacity:1}},t.unselected={marker:{opacity:1}})},setTraceStyle:function(t,e){t&&e&&(t.line={color:e.color.value,width:2,dash:"solid",shape:"linear",simplify:!0},t.mode="lines",t.type="scatter",t.opacity=1,t.size=3,t.marker={size:3},t.maxdisplayed=0,t.gradient={type:"none"})},parameterToTrace:function(t,e){let s={x:[],y:[],name:"Default",yaxis:"y",close:!1,connectgaps:!1};t&&e?(s={x:t.x,y:t.y,close:!1,connectgaps:!1,name:t.name,yaxis:"y"},this.setTraceSelectMode(s),this.setTraceStyle(s),e(s)):e&&e(s)},initParameters:function(t,e){t&&this.parameterToTrace(t[e],t=>{t&&this.addTrace(t,!0)})}}},Hi={data:()=>({data:[],layout:{},config:{},chartname:"",chartDiv:null,componentKey:1,rangeslider:!0,modeBarButtons:[],xAxisName:"Time",yAxisName:"Value",title:"Chart title",theme:{name:"light",background:"rgb(255,255,255)",plotPaper:"rgb(255,255,255)",grid:"rgb(230,230,230)",text:"rgb(70,70,70)",iconColor:"rgba(68, 68, 68, 0.3)",activecolor:"rgba(212, 10, 10, 0.7)",chartTabColor:"light-blue",flagOpacity:.28,thresholdMaxColor:"rgb(245,6,6)",thresholdMinColor:"rgb(27,27,28)"}}),watch:{},methods:{getXMargin:function(){return{t:40,b:26,l:72,r:80,pad:0,autoexpand:!0}},getXaxis:function(t){let e=this.theme.text,s="",i="";return{type:t,range:[s,i],gridcolor:this.theme.grid,tickfont:{color:e},title:{text:this.xAxisName,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},fixedrange:!0,margin:this.getXMargin(),rangeslider:{visible:this.rangeslider,y:1}}},getYaxis:function(){return{title:{text:this.yAxisName,font:{family:"Courier New, monospace",size:18,color:this.theme.text}},gridcolor:this.theme.grid,tickfont:{color:this.theme.text},fixedrange:!1,zeroline:!1}},getTitle:function(){return{text:this.title,x:.52,font:{color:this.theme.text,family:'"Open Sans", verdana, arial, sans-serif',size:18}}},initLayout:function(){this.layout={height:400,showlegend:!0,font:{color:this.theme.text},plot_bgcolor:this.theme.plotPaper,paper_bgcolor:this.theme.plotPaper,title:this.getTitle(),xaxis:this.getXaxis(),yaxis:this.getYaxis(),shapes:[]}},getModeBarConf:function(){return[["select2d"],[{name:"resetAxes",icon:this.$Plotly.Icons.home,click:()=>{}},"sendDataToCloud"]]},getChartModeBar:function(t){let e=[];return"defaultChart"!==this.getChartId&&(e=this.getModeBarConf(t)),e},loadChart:function(t,e){null===e&&t?this.$Plotly.react(t,this.data,this.layout,this.config):t&&this.$Plotly.newPlot(t,this.data,this.layout,this.config)},configuration:function(t,e){this.modeBarButtons=this.getChartModeBar({},e),this.initLayout(),this.loadChart(t,e)},initCharts:function(t,e){this.$nextTick(()=>{ss()("document").ready(()=>{this.chartDiv=document.getElementById(this.chartId),this.configuration(this.chartDiv,t),e&&e()})})}}},Ji={name:"Chart",components:{},props:{point:{type:Object,default:()=>null},parameters:{type:Array,default:()=>[{name:"default",x:[],y:[],color:"rgba(245, 40, 145, 0.8)"}]}},watch:{point:function(){this.point&&this.removeTracePoint(this.point)},parameters:{handler:function(t,e){this.addParameters(t,e)},immediate:!0},"$store.state.trafficlawstore.vResponse":{handler:function(){const{vResponse:t}=this.$store.state.trafficlawstore;t&&t.defaultResponses&&0===t.defaultResponses.length&&this.removeTrace([{name:t.videoId}])},immediate:!0}},mixins:[Yi,Hi],data:()=>({chartId:"chart",componentKey:1}),methods:{refreshChart:function(){this.componentKey++},addParameters:function(t,e){0===Object.keys(this.layout).length?this.initCharts(t[0],()=>{this.initParameters(t,0)}):this.removeTrace(e,()=>{this.initParameters(t,0)})}}},Xi=Ji,Ki=Object(it["a"])(Xi,qi,Gi,!1,null,"88525686",null),Wi=Ki.exports,Zi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(K["a"],{attrs:{"open-on-hover":"",top:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[t._t("VideoMenu",null,{vOn:e,attrs:s})]}}],null,!0)},[e("iframe",{attrs:{id:"inlineFrameExample",title:"Inline Frame Example",width:"300",height:"200",src:"http://www.youtube.com/embed/"+t.videoId}})])],1)},ta=[],ea={name:"VideoMenu",components:{},props:{videoId:{type:String,default:()=>"M7lc1UVf-VE"}},data:()=>({}),watch:{},methods:{}},sa=ea,ia=Object(it["a"])(sa,Zi,ta,!1,null,"6f82a362",null),aa=ia.exports,oa={name:"VideoStates",props:{nbrQuestions:{type:Number,default:()=>0},playerVideoId:{type:String,default:()=>""}},components:{Chart:Wi,VideoMenu:aa,DeleteDialog:Di},watch:{"$store.state.trafficlawstore.vResponse":{handler:function(){const{vResponse:t}=this.$store.state.trafficlawstore;t&&(t.defaultResponses&&0===t.defaultResponses.length?this.states=[]:(this.parameters=[],this.responsesToParameter(t,t=>{this.parameters.push(t),this.setTableStates(t)})))},immediate:!0},"$store.state.trafficlawstore.userResponses":{handler:function(){this.refreshOverView()},immediate:!0},"$store.state.trafficlawstore.defaultResponses":{handler:function(){this.refreshOverView()},immediate:!0}},mixins:[k,hi],data:()=>({states:[],point:null,statesOverView:{corrects:{color:"green",title:"Corrects",value:"0"},errors:{color:"red",title:"Errors",value:"0"}},parameters:[]}),methods:{refreshOverView:function(){const{userResponses:t,defaultResponses:e}=this.$store.state.trafficlawstore;t&&e?this.viewToModel(t,e,({v1:t,v2:e})=>{this.evaluateResponses(t,e,t=>{this.statesOverView.corrects.value=Number(t),this.statesOverView.errors.value=this.nbrQuestions-Number(t)})}):this.statesOverView.errors.value=this.nbrQuestions},setTableStates:function(t){this.states=[],t.x&&t.x.forEach((e,s)=>{this.states.push({date:e,videoId:t.name,score:t.y[s]+"/"+this.nbrQuestions,save:!0})})},removeElement:function(t){let e;const{vResponse:s}=this.$store.state.trafficlawstore,{videoId:i}=s;t&&s&&(s.userResponses=s.userResponses.filter(e=>void 0===e[t.date]),this.point=t,e=this.states.indexOf(t),this.states.splice(e,1),this.$store.commit("updateVResponse",s),this.viewToModel(s.userResponses,s.defaultResponses,({v2:t})=>{this.responsesToData(null,t,i,t=>{this.postData("https://trafficlaws-server.vercel.app/trafficlaws",t)})}))},removeFolder:function(){const{tokens:t}=this.$store.state.trafficlawstore;t&&this.deleteData("https://trafficlaws-server.vercel.app/trafficlaws/folder/TrafficLaws",t=>{t&&this.getVideoResponses(this.videoId)})}}},na=oa,la=Object(it["a"])(na,Ui,Qi,!1,null,null,null),ra=la.exports,ca=function(){var t=this,e=t._self._c;return e("div",[e("PlayListLayout",{attrs:{videoView:!t.showChannel},scopedSlots:t._u([{key:"VideoView",fn:function(){return[e("VideoView",{attrs:{playList:t.playList,updatePlayer:t.updatePlayer}})]},proxy:!0},{key:"ChannelView",fn:function(){return[e("ChannelView",{attrs:{playList:t.playList,changeVideos:t.changeVideos}})]},proxy:!0}])}),e("VideosActions",{attrs:{title:!1,videos:t.videos,channels:t.channels,nextVideos:t.nextVideos,playerVideoId:t.playerVideoId,nextPageToken:t.nextPageToken,channelNextPageToken:t.channelNextPageToken}})],1)},da=[],ua=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-1"},t._l(t.playList,(function(s,i){return e(w["a"],{key:i,staticClass:"pa-1",attrs:{justify:"space-around"}},[e(J["a"],{attrs:{width:"400"}},[e(ns["a"],{attrs:{height:"130px",src:"https://cdn.pixabay.com/photo/2020/07/12/07/47/bee-5396362_1280.jpg"},on:{click:function(e){return t.changeVideos(s.id,0)}}},[e(nt["c"],{staticClass:"white--text mt-8"},[e(St["a"],{attrs:{size:"56"}},[e("img",{attrs:{alt:"user",src:s.src}})]),e("p",{staticClass:"ml-3"},[t._v(" "+t._s(s.title)+" ")])],1)],1)],1)],1)})),1)},ha=[],pa={name:"ChannelView",props:{playList:{type:Array,default:()=>[]},changeVideos:{type:Function,default:()=>{}}},data:()=>({}),methods:{}},fa=pa,ma=Object(it["a"])(fa,ua,ha,!1,null,"2d8a2df4",null),ga=ma.exports,va=function(){var t=this,e=t._self._c;return e("div",t._l(t.playList,(function(s){return e(J["a"],{key:s.id,staticClass:"pa-2",attrs:{dark:"",color:s.id===t.playerVideoId?"green":"white"},on:{click:function(e){return t.updatePlayer(s.id)}}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[e(ns["a"],{staticClass:"pa-2",attrs:{"max-width":"168",src:s.src}}),e("div",[e("div",[e("span",{staticClass:"overflow-y-hidden black--text"},[t._v(" "+t._s(s.title)+" ")])])])],1)])})),1)},ya=[],wa={name:"VideoView",props:{playerVideoId:{type:String,default:()=>""},playList:{type:Array,default:()=>[]},updatePlayer:{type:Function,default:()=>{}}},data:()=>({}),methods:{}},ba=wa,Ca=Object(it["a"])(ba,va,ya,!1,null,"6fdd16cc",null),xa=Ca.exports,_a=function(){var t=this,e=t._self._c;return e(J["a"],{staticClass:"overflow-y-auto overflow-x-hidden",attrs:{outlined:"",height:t.height}},[t.videoView?t._t("VideoView"):t._t("ChannelView")],2)},Ia=[],ka={name:"PlayListLayout",props:{height:{type:Number,default:450},videoView:{type:Boolean,default:()=>!1}},data:()=>({}),methods:{}},Fa=ka,Da=Object(it["a"])(Fa,_a,Ia,!1,null,null,null),Sa=Da.exports,Va=function(){var t=this,e=t._self._c;return e(J["a"],[e(wi["a"],{attrs:{value:t.value,color:"primary"}},[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:t.nextVideos}},"v-btn",i,!1),s),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-chevron-down ")])],1)]}}])},[e("span",[t._v("More")])]),e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:t.flushPlayList}},"v-btn",i,!1),s),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-cloud-upload-outline ")])],1)]}}])},[e("span",[t._v("Upload videos")])]),e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"},on:{click:()=>{}}},"v-btn",i,!1),s),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-playlist-edit ")])],1)]}}])},[e("span",[t._v("Update default playList")])]),e("DeleteDialog",{attrs:{removFolder:t.removFolder},scopedSlots:t._u([{key:"dialogButton",fn:function({deletedialog:s,attrs:i}){return[e(ls["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(H["a"],t._g(t._b({attrs:{icon:"",color:"green"}},"v-btn",i,!1),{...s,...a}),[e(d["a"],{attrs:{"aria-hidden":"false"}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[e("span",[t._v("Delete folder")])])]}}])})],1),t.progress?e(ct["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}}):t._e()],1)},Pa=[],Ra={name:"VideosActions",components:{DeleteDialog:Di},props:{channels:{type:Array,default:()=>[]},videos:{type:Array,default:()=>[]},nextVideos:{type:Function,default:()=>{}},playerVideoId:{type:String},nextPageToken:{type:String,default:()=>""},channelNextPageToken:{type:String,default:()=>""}},data:()=>({value:1,progress:!1,currentArchives:[]}),mixins:[k],methods:{removFolder:function(){const{tokens:t}=this.$store.state.trafficlawstore;t&&this.deleteData("https://trafficlaws-server.vercel.app/trafficlaws/folder/TrafficLaws",t=>{t&&this.getVideoResponses()})},flushPlayList:function(){const{tokens:t}=this.$store.state.trafficlawstore;t&&this.channels&&this.videos&&(this.progress=!0,this.postData("https://trafficlaws-server.vercel.app/trafficlaws",{folderName:"TrafficLaws",fileName:"videos.json",data:{videos:this.videos,channels:this.channels,nextPageToken:this.nextPageToken,playerVideoId:this.playerVideoId,channelNextPageToken:this.channelNextPageToken}},t=>{t&&(this.progress=!1)}))}}},Aa=Ra,Ta=Object(it["a"])(Aa,Va,Pa,!1,null,"6d9b7d3e",null),$a=Ta.exports,La={name:"VideoPlayList",components:{ChannelView:ga,VideoView:xa,PlayListLayout:Sa,VideosActions:$a},props:{height:{type:Number},vertical:{type:Boolean,default:()=>!1},showChannel:{type:Boolean,default:()=>!1},channels:{type:Array,default:()=>[]},videos:{type:Array,default:()=>[]},updatePlayer:{type:Function,default:()=>{}},getNextVideos:{type:Function,default:()=>{}},nextPageToken:{type:String,default:()=>""},getNextChannels:{type:Function,default:()=>{}},channelNextPageToken:{type:String,default:()=>""},changeVideos:{type:Function},playerVideoId:{type:String},numberOfItems:{type:Number,default:()=>5}},data:()=>({model:null,playList:[],cptItems:0}),watch:{videos:{handler:function(){!this.showChannel&&this.videos&&(this.playList=this.videos)},immediate:!0},channels:{handler:function(){this.showChannel&&(this.playList=this.channels)},immediate:!0}},methods:{preVideos:function(){this.cptItems-=1},nextVideos:function(){this.cptItems+=1,this.cptItems*this.numberOfItems===this.playList.length&&(this.showChannel?this.getNextChannels(""):this.getNextVideos(""))}}},Oa=La,ja=Object(it["a"])(Oa,ca,da,!1,null,"750b1b98",null),Na=ja.exports,Ma={name:"Trafficlaws",components:{DualLayout:Li,VideoQCM:gi,VideoStates:ra,VideoPlayer:Ei,VideoPlayList:Na},data:()=>({height:528,videos:[],channels:[],editMode:!1,playerVideoId:"M7lc1UVf-VE",tabs:["Videos","Channels","QCM","Stats"],tabIndex:{value:0},channelId:null,nbrQuestions:40,numberOfVideo:5,nextPageToken:null,channelNextPageToken:null,responses:[],currentConfig:null}),mixins:[k,Y,ce,hi],watch:{playerVideoId:function(){this.playerVideoId&&this.getVideoResponses(this.playerVideoId)},tabIndex:function(){console.log("watch tabIndex : ",this.tabIndex)},"$store.state.trafficlawstore.searchField":{handler:function(){const{searchField:t}=this.$store.state.trafficlawstore;!t||"Videos"!==this.tabs[this.tabIndex.value]&&"Channels"!==this.tabs[this.tabIndex.value]||(this.getVideos(t),this.getChannels(t))},immediate:!0},"$store.state.trafficlawstore.config":{handler:function(){const{config:t}=this.$store.state.trafficlawstore;null===this.currentConfig&&t&&this.initConfig(t)},immediate:!0}},created(){this.fetchCredential()},methods:{execute:A,loadClient:R,serializeObj:ii,...Object(a["b"])(["fetchCredential"]),initConfig:function(t){this.currentConfig=t,t.playListFile&&this.initPlayList(t)},initPlayList:function(t){t&&this.getFile(t.playListFile,t=>{t&&(this.videos=t)})},initResponses:function(){const{vResponse:t}=this.$store.state.trafficlawstore;t?this.modelToView(t.defaultResponses,t=>{this.responses=t}):this.responses=this.getDefaultResponse(40,4),this.$store.commit("updateDefaultResponses",this.responses)},getVideoResponses:function(t){t&&this.getFile(t+".json",t=>{this.$store.commit("updateVResponse",t),this.initResponses()})},resetResponses:function(){const{vResponse:t}=this.$store.state.trafficlawstore;t&&t.defaultResponses&&this.modelToView(t.defaultResponses,t=>{this.$store.commit("updateDefaultResponses",t),this.responses=Object.assign([],t)})},updatePlayer:function(t){t&&(this.playerVideoId=t)},getChannels:function(t){t&&(this.channelNextPageToken=null,this.searchChannels(this.channelId,t,this.channelNextPageToken,(t,e)=>{t&&(this.channelNextPageToken=e,this.channels=t)}))},getNextChannels:function(){const{searchField:t}=this.$store.state.trafficlawstore;this.getMoreChannels(this.channelId,t,this.channelNextPageToken,(t,e)=>{this.channels=t,this.channelNextPageToken=e})},changeVideos:function(t){t&&(this.nextPageToken=null,this.showChannelVideos(t,null,(t,e)=>{this.videos=t,this.videos[0]&&this.videos[0].id&&(this.nextPageToken=e,this.playerVideoId=this.videos[0].id.videoId),this.tabIndex={value:0}}))},getVideos:function(t){t&&this.searchVideos(t,(t,e)=>{this.videos=t,this.videos[0]&&this.videos[0].id&&(this.nextPageToken=e,this.playerVideoId=this.videos[0].id.videoId)})},getNextVideos:function(t){this.getMoreVideos(this.channelId,t,this.nextPageToken,(t,e)=>{this.videos=t,this.nextPageToken=e})},enableEditMode:function(){this.editMode=!this.editMode},editResponses:function(){this.responses&&this.serializeObj(this.responses,"responses.json",t=>{console.log("editResponses : ",t,this.responses)})}}},Ba=Ma,Ea=Object(it["a"])(Ba,Ks,Ws,!1,null,null,null),za=Ea.exports;i["a"].use(Dt["a"]);const Ua=[{path:"/",name:"Home",component:za,meta:{isAuthenticated:!1}},{path:"/studio",name:"Studion",component:Xs,meta:{isAuthenticated:!1}},{path:"/openai",name:"OpenAI",component:zt,meta:{isAuthenticated:!1}},{path:"/login",name:"Auth",component:Lt,meta:{isAuthenticated:!1}}],Qa=new Dt["a"]({routes:Ua});Qa.beforeEach((t,e,s)=>{const i=window.localStorage.getItem("tokens");!window||"Auth"===t.name||null!==i&&"null"!==i?s():s({name:"Auth"})});var qa=Qa,Ga=s("130e"),Ya=s("61cc"),Ha=s.n(Ya),Ja=s("f309");i["a"].use(Ja["a"]);var Xa=new Ja["a"]({}),Ka={state:{cutsCpt:{value:0},currentPlayList:[],favoritesChannels:[],selectCuts:{state:!1},clearCuts:{state:!1}},mutations:{updateCutsCpt(t,e){t.cutsCpt=e},updateClearCuts(t,e){t.clearCuts=e},updateSelectCuts(t,e){t.selectCuts=e},updateCurrentPlayList(t,e){t.currentPlayList=e},updateFavoritesChannels(t,e){t.favoritesChannels=e}}},Wa=s("1232"),Za={state:{cuts:[],config:null,tokens:null,searchField:"",responses:{},vResponse:null,credential:null,userResponses:null,showResponse:!1,defaultResponses:[],downloadDialog:!1,playerReady:{state:!1}},mutations:{updateConfig(t,e){t.config=e},updateCuts(t,e){t.cuts=e},updateTokens(t,e){t.tokens=e},updateDownloadDialog(t,e){t.downloadDialog=e},updatePlayerReady(t,e){t.playerReady=e},updateSearchField(t,e){t.searchField=e},updateShowResponse(t,e){t.showResponse=e},updateResponses(t,e){t.responses=e},updateCredential(t,e){t.credential=null===e?e:Object(Wa["a"])(e)},updateVResponse:function(t,e){t.vResponse=Object.assign({},e)},updateUserResponses(t,e){t.userResponses=Object.assign({},e)},updateDefaultResponses(t,e){t.defaultResponses=Object.assign([],e)}},actions:{fetchCredential({commit:t}){const e=localStorage.getItem("tokens"),s=localStorage.getItem("credential");s&&"null"!==s&&t("updateCredential",localStorage.getItem("credential")),e&&"null"!==e&&t("updateTokens",JSON.parse(localStorage.getItem("tokens")))}}},to=s("9e9d");i["a"].use(a["a"]),i["a"].use(Ha.a),i["a"].use(Ga["a"],n.a),i["a"].use(to["a"]),i["a"].config.productionTip=!1,i["a"].prototype.$Plotly=Ha.a;const eo=new a["a"].Store({namespaced:!0,modules:{studio:Ka,trafficlawstore:Za}}),so=new i["a"]({store:eo,router:qa,vuetify:Xa,render:t=>t(Ft)}).$mount("#app");window.App=so},"8eb9":function(t,e,s){"use strict";s("9b6c")},9641:function(t,e,s){},"9b6c":function(t,e,s){},b182:function(t,e,s){}});
//# sourceMappingURL=app.81545170.js.map